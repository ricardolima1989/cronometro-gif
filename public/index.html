<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Cronômetro com GIF via Servidor</title>
  <style>
    * {
      box-sizing: border-box;
    }
    body {
      background: #f4f4f4;
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 20px;
      display: flex;
      justify-content: center;
    }
    .container {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
      width: 100%;
      max-width: 1440px;
    }
    .col {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .secao {
      background: #fff;
      border: 1px solid #ddd;
      border-radius: 10px;
      padding: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.05);
    }
    .secao h2 {
      font-size: 14px;
      margin: 0 0 10px;
      color: #444;
    }
    .grupo {
      margin-bottom: 8px;
    }
    .grupo label {
      display: block;
      font-size: 14px;
      font-weight: 500;
      color: #333;
      margin-bottom: 4px;
    }
    .linha-color {
      display: flex;
      gap: 8px;
      align-items: center;
    }
    .linha-color input[type="color"] {
      width: 40px;
      height: 40px;
      border: none;
      background: none;
    }
    .linha-color input[type="text"] {
      flex: 1;
      padding: 8px;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 14px;
    }
    .linha-check {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 8px;
    }
    select, input[type="range"], input[type="number"] {
      width: 100%;
      padding: 8px;
      font-size: 14px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    button {
      margin-top: 16px;
      width: 100%;
      padding: 12px;
      background: #28a745;
      color: white;
      border: none;
      border-radius: 8px;
      font-weight: bold;
      font-size: 15px;
      cursor: pointer;
    }
    /* Botão reset com estilo discreto */
    .btn-reset {
      margin-top: 8px;
      width: 100%;
      padding: 10px;
      background: #ccc;
      color: #333;
      border: none;
      border-radius: 6px;
      font-size: 14px;
      cursor: pointer;
    }
    /* Botões desabilitados */
    button:disabled {
      background: #ccc;
      cursor: not-allowed;
      color: #000;
    }
    #status {
      margin-top: 8px;
      text-align: center;
      font-size: 14px;
      color: #666;
    }
    canvas {
      background: transparent;
      border: 1px solid #ccc;
      border-radius: 10px;
      box-shadow: 0 0 8px rgba(0,0,0,0.2);
    }
    .preview {
      text-align: center;
    }
    h1 {
      grid-column: span 4;
      text-align: center;
      font-size: 20px;
      margin-bottom: 10px;
    }
    /* Responsividade: em telas menores que 768px, empilha as colunas */
@media (max-width: 768px) {
  .container {
    grid-template-columns: 1fr; /* Força uma única coluna */
	display: flex;
	flex-direction: column;
	align-items: stretch;
	
	
	
  }
  .col {
    width: 100% !important;
    max-width: 100% !important;
  }
  h1 {
    text-align: center;
    margin-bottom: 20px;
  }
  canvas {
    max-width: 100%;
    height: auto;
  }
}
  </style>
</head>
<body>
  <div class="container">
    <h1>Cronômetro com GIF via Servidor</h1>
    
    <!-- Coluna 1: Timer, Círculo e Borda -->
    <div class="col">
      <!-- Valor Inicial do Timer -->
      <div class="secao">
        <h2>Valor Inicial do Timer</h2>
        <div class="grupo">
          <label for="initialTime">Defina o tempo inicial (segundos):</label>
          <input type="number" id="initialTime" value="30" min="1" />
        </div>
      </div>
      <!-- Configuração do Círculo -->
      <div class="secao">
        <h2>Configuração do Círculo</h2>
        <div class="grupo">
          <div class="linha-check">
            <input type="checkbox" id="circuloTransparente" onchange="atualizarCampo('circulo')">
            <label for="circuloTransparente">Círculo transparente</label>
          </div>
          <label>Cor do círculo:</label>
          <div class="linha-color">
            <input type="color" id="corCirculo" value="#4A90E2" />
            <input type="text" id="hexCirculo" value="#4A90E2" />
          </div>
        </div>
        <div class="grupo">
          <label for="grossuraCirculo">
            Grossura do círculo: <span id="displayGrossuraCirculo">28</span> px
          </label>
          <input type="range" id="grossuraCirculo" min="1" max="40" value="28" />
        </div>
        <div class="grupo">
          <div class="linha-check">
            <input type="checkbox" id="circuloContornoAtivo" onchange="toggleContorno('circulo')">
            <label for="circuloContornoAtivo">Ativar contorno do círculo</label>
          </div>
        </div>
        <div id="grupoCirculoContorno" style="display: none;">
          <div class="grupo">
            <label>Cor do contorno do círculo:</label>
            <div class="linha-color">
              <input type="color" id="corCirculoContorno" value="#000000" />
              <input type="text" id="hexCirculoContorno" value="#000000" />
            </div>
          </div>
          <div class="grupo">
            <label for="grossuraCirculoContorno">
              Grossura do contorno: <span id="displayGrossuraCirculoContorno">2</span> px
            </label>
            <input type="range" id="grossuraCirculoContorno" min="1" max="20" value="2" />
          </div>
          <div class="grupo">
            <label>Tipo de linha:</label>
            <select id="tipoCirculoContorno">
              <option value="solid">Sólido</option>
              <option value="dashed">Tracejado</option>
              <option value="dotted">Pontilhado</option>
            </select>
          </div>
        </div>
      </div>
      <!-- Configuração da Borda -->
      <div class="secao">
        <h2>Configuração da Borda</h2>
        <div class="grupo">
          <div class="linha-check">
            <input type="checkbox" id="bordaTransparente" onchange="atualizarCampo('borda')">
            <label for="bordaTransparente">Borda transparente</label>
          </div>
          <label>Cor da borda:</label>
          <div class="linha-color">
            <input type="color" id="corBorda" value="#2D3E50" />
            <input type="text" id="hexBorda" value="#2D3E50" />
          </div>
        </div>
        <div class="grupo">
          <label for="grossuraBorda">
            Grossura da borda: <span id="displayGrossuraBorda">5</span> px
          </label>
          <input type="range" id="grossuraBorda" min="1" max="40" value="5" />
        </div>
        <div class="grupo">
          <div class="linha-check">
            <input type="checkbox" id="bordaContornoAtivo" onchange="toggleContorno('borda')">
            <label for="bordaContornoAtivo">Ativar contorno da borda</label>
          </div>
        </div>
        <div id="grupoBordaContorno" style="display: none;">
          <div class="grupo">
            <label>Cor do contorno da borda:</label>
            <div class="linha-color">
              <input type="color" id="corBordaContorno" value="#000000" />
              <input type="text" id="hexBordaContorno" value="#000000" />
            </div>
          </div>
          <div class="grupo">
            <label for="grossuraBordaContorno">
              Grossura do contorno: <span id="displayGrossuraBordaContorno">2</span> px
            </label>
            <input type="range" id="grossuraBordaContorno" min="1" max="20" value="2" />
          </div>
          <div class="grupo">
            <label>Tipo de linha:</label>
            <select id="tipoBordaContorno">
              <option value="solid">Sólido</option>
              <option value="dashed">Tracejado</option>
              <option value="dotted">Pontilhado</option>
            </select>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Coluna 2: Texto e Fundo -->
    <div class="col">
      <!-- Configuração do Texto -->
      <div class="secao">
        <h2>Configuração do Texto</h2>
        <div class="grupo">
          <label>Cor do texto:</label>
          <div class="linha-color">
            <input type="color" id="corTexto" value="#ffffff" />
            <input type="text" id="hexTexto" value="#ffffff" />
          </div>
        </div>
        <div class="grupo">
          <label for="tamanhoTexto">
            Tamanho do texto: <span id="displayTamanhoTexto">90</span> px
          </label>
          <input type="range" id="tamanhoTexto" min="10" max="100" value="90" />
        </div>
        <div class="grupo">
          <div class="linha-check">
            <input type="checkbox" id="textoContornoAtivo" onchange="toggleContorno('texto')">
            <label for="textoContornoAtivo">Ativar contorno do texto</label>
          </div>
        </div>
        <div id="grupoTextoContorno" style="display: none;">
          <div class="grupo">
            <label>Cor do contorno do texto:</label>
            <div class="linha-color">
              <input type="color" id="corTextoContorno" value="#000000" />
              <input type="text" id="hexTextoContorno" value="#000000" />
            </div>
          </div>
          <div class="grupo">
            <label for="grossuraTextoContorno">
              Grossura do contorno: <span id="displayGrossuraTextoContorno">2</span> px
            </label>
            <input type="range" id="grossuraTextoContorno" min="1" max="20" value="2" />
          </div>
          <div class="grupo">
            <label>Tipo de linha:</label>
            <select id="tipoTextoContorno">
              <option value="solid">Sólido</option>
              <option value="dashed">Tracejado</option>
              <option value="dotted">Pontilhado</option>
            </select>
          </div>
        </div>
      </div>
      <!-- Configuração do Fundo -->
      <div class="secao">
        <h2>Configuração do Fundo</h2>
        <div class="grupo">
          <div class="linha-check">
            <input type="checkbox" id="fundoTransparente" checked onchange="atualizarCampo('fundo')">
            <label for="fundoTransparente">Fundo transparente</label>
          </div>
          <label>Cor do fundo:</label>
          <div class="linha-color">
            <input type="color" id="corFundo" value="#000000" disabled />
            <input type="text" id="hexFundo" value="transparent" disabled />
          </div>
        </div>
        <div class="grupo">
          <div class="linha-check">
            <input type="checkbox" id="fundoContornoAtivo" onchange="toggleContorno('fundo')">
            <label for="fundoContornoAtivo">Ativar contorno do fundo</label>
          </div>
        </div>
        <div id="grupoFundoContorno" style="display: none;">
          <div class="grupo">
            <label>Cor do contorno do fundo:</label>
            <div class="linha-color">
              <input type="color" id="corFundoContorno" value="#000000" />
              <input type="text" id="hexFundoContorno" value="#000000" />
            </div>
          </div>
          <div class="grupo">
            <label for="grossuraFundoContorno">
              Grossura do contorno: <span id="displayGrossuraFundoContorno">2</span> px
            </label>
            <input type="range" id="grossuraFundoContorno" min="1" max="20" value="2" />
          </div>
          <div class="grupo">
            <label>Tipo de linha:</label>
            <select id="tipoFundoContorno">
              <option value="solid">Sólido</option>
              <option value="dashed">Tracejado</option>
              <option value="dotted">Pontilhado</option>
            </select>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Coluna 3: Sombra e Traçado do Círculo -->
    <div class="col">
      <!-- Configuração da Sombra -->
      <div class="secao">
        <h2>Configuração da Sombra</h2>
        <div class="grupo">
          <div class="linha-check">
            <input type="checkbox" id="sombraTransparente" onchange="toggleSombra()">
            <label for="sombraTransparente">Sombra transparente</label>
          </div>
          <label>Cor da sombra:</label>
          <div class="linha-color">
            <input type="color" id="corSombra" value="#000000" />
            <input type="text" id="hexSombra" value="#000000" />
          </div>
        </div>
        <div id="grupoSombra">
          <div class="grupo">
            <label>Intensidade da sombra:</label>
            <input type="range" id="sombra" min="0" max="30" value="8" />
          </div>
          <div class="grupo">
            <label>Direção da sombra (horizontal):</label>
            <input type="range" id="sombraX" min="-30" max="30" value="4" />
          </div>
          <div class="grupo">
            <label>Direção da sombra (vertical):</label>
            <input type="range" id="sombraY" min="-30" max="30" value="4" />
          </div>
        </div>
        <button onclick="iniciarContagem()">Gerar GIF</button>
        <button class="btn-reset" onclick="resetarPadroes()">Resetar Padrões</button>
        <div id="status">Aguardando...</div>
      </div>
      <!-- Traçado do Círculo -->
      <div class="secao">
        <h2>Traçado do Círculo</h2>
        <div class="grupo">
          <label>Tipo de traço do círculo:</label>
          <select id="tipoTraco">
            <option value="solid" selected>Sólido</option>
            <option value="dashed">Tracejado</option>
            <option value="dotted">Pontilhado</option>
          </select>
        </div>
      </div>
    </div>
    
    <!-- Coluna 4: Pré-visualização e GIF final para download -->
    <div class="col preview">
      <div class="secao">
        <canvas id="canvas" width="300" height="300"
        style="width:300px;height:300px;"></canvas>
        <p style="margin-top: 12px;">Pré-visualização</p>
      </div>
      <div class="secao">
        <h2>GIF Final para Download</h2>
        <div id="gifDownload">
          <p>Aguardando...</p>
        </div>
      </div>
    </div>
  </div>
  
  
  
  
  
  
  <script>
/* ========== CANVASES ========== */
const LOGICAL = 300;                                // tamanho visível
const preview = document.getElementById("canvas");  // 300×300
const ctxPrev = preview.getContext("2d");           // escala 1

const SCALE = 25;                                   // 300 × 25 = 7 500
const hiCanvas = document.createElement("canvas");  // off‑screen
hiCanvas.width  = LOGICAL * SCALE;
hiCanvas.height = LOGICAL * SCALE;
const ctxHi = hiCanvas.getContext("2d");
ctxHi.scale(SCALE, SCALE);                          // usa coords lógicas
/* ============================================ */

const status      = document.getElementById("status");
const gifDownload = document.getElementById("gifDownload");
let frames        = [];
let tempoTotal    = +document.getElementById("initialTime").value || 30;
let sombraAnterior = "#000000";

/* ========== UTILIDADES ========== */
const hex = id => document.getElementById(`hex${id}`).value || "transparent";
const cap = s  => s.charAt(0).toUpperCase() + s.slice(1);
const $   = sel=>document.querySelectorAll(sel);
function desabilitarControles(){ $(".container input, .container select, .container button").forEach(el=>el.disabled=true);}
function habilitarControles(){  $(".container input, .container select, .container button").forEach(el=>el.disabled=false);}

/* ========== CAMPOS DINÂMICOS ========== */
function atualizarCampo(tipo){
  const color = document.getElementById(`cor${cap(tipo)}`);
  const hexF  = document.getElementById(`hex${cap(tipo)}`);
  if (!color) return;
  const cb = document.getElementById(`${tipo}Transparente`) ||
             document.getElementById(`${tipo}ContornoAtivo`);
  if (cb?.checked){
    hexF.value = "transparent";
    color.disabled = hexF.disabled = true;
  }else{
    color.disabled = hexF.disabled = false;
    hexF.value = color.value;
  }
  desenhar(ctxPrev,0,tempoTotal);
}
function toggleContorno(tipo){
  document.getElementById(`grupo${cap(tipo)}Contorno`).style.display =
    document.getElementById(`${tipo}ContornoAtivo`).checked ? "block":"none";
  atualizarCampo(`${tipo}Contorno`);
}
function toggleSombra(){
  const chk = document.getElementById("sombraTransparente");
  const grp = document.getElementById("grupoSombra");
  const cor = document.getElementById("corSombra");
  const hexS= document.getElementById("hexSombra");
  if (chk.checked){
    sombraAnterior = cor.value;
    grp.style.display="none";
    hexS.value="transparent";
    cor.disabled = hexS.disabled = true;
  }else{
    grp.style.display="block";
    cor.disabled = hexS.disabled = false;
    if (hexS.value==="transparent") cor.value = hexS.value = sombraAnterior;
  }
  desenhar(ctxPrev,0,tempoTotal);
}

/* ========== EVENTOS DE COR ========== */
["Circulo","Borda","Texto","Fundo","Sombra","TextoContorno"].forEach(t=>{
  document.getElementById(`cor${t}`).addEventListener("input",e=>{
    document.getElementById(`hex${t}`).value = e.target.value;
    desenhar(ctxPrev,0,tempoTotal);
  });
  document.getElementById(`hex${t}`).addEventListener("input",e=>{
    document.getElementById(`cor${t}`).value = e.target.value;
    desenhar(ctxPrev,0,tempoTotal);
  });
});

/* ========== SLIDERS ========== */
[
 ["tamanhoTexto","displayTamanhoTexto"],
 ["grossuraBordaContorno","displayGrossuraBordaContorno"],
 ["grossuraCirculoContorno","displayGrossuraCirculoContorno"],
 ["grossuraTextoContorno","displayGrossuraTextoContorno"],
 ["grossuraFundoContorno","displayGrossuraFundoContorno"],
 ["grossuraCirculo","displayGrossuraCirculo"],
 ["grossuraBorda","displayGrossuraBorda"]
].forEach(([inp,span])=>{
  document.getElementById(inp).addEventListener("input",e=>{
    document.getElementById(span).textContent = e.target.value;
    desenhar(ctxPrev,0,tempoTotal);
  });
});
["sombra","sombraX","sombraY","tipoTraco"].forEach(id=>{
  document.getElementById(id).addEventListener("input",()=>desenhar(ctxPrev,0,tempoTotal));
});
document.getElementById("initialTime").addEventListener("input",()=>{
  tempoTotal = +document.getElementById("initialTime").value || 0;
  desenhar(ctxPrev,0,tempoTotal);
});

/* ========== FUNÇÃO DE DESENHO ========== */
function desenhar(ctx, prog, rest){
  const c=150,r=100,ai=-Math.PI/2,af=ai+prog*2*Math.PI;
  const cf=hex("Fundo"), cb=hex("Borda"), cc=hex("Circulo"),
        ct=hex("Texto"), cs=hex("Sombra"),
        tp=document.getElementById("tipoTraco").value;

  const sb=+document.getElementById("sombra").value,
        ox=+document.getElementById("sombraX").value,
        oy=+document.getElementById("sombraY").value,
        ft=+document.getElementById("tamanhoTexto").value,
        gC=+document.getElementById("grossuraCirculo").value,
        gB=+document.getElementById("grossuraBorda").value;

  ctx.clearRect(0,0,LOGICAL,LOGICAL);
  if(cf!=="transparent"){ctx.fillStyle=cf;ctx.fillRect(0,0,LOGICAL,LOGICAL);}

  if(document.getElementById("fundoContornoAtivo")?.checked){
    const cor=document.getElementById("hexFundoContorno").value,
          g=+document.getElementById("grossuraFundoContorno").value,
          t=document.getElementById("tipoFundoContorno").value;
    ctx.beginPath();ctx.setLineDash(t==="dashed"?[10,10]:t==="dotted"?[2,6]:[]);
    ctx.strokeStyle=cor;ctx.lineWidth=g;ctx.strokeRect(0,0,LOGICAL,LOGICAL);
  }

  if(cb!=="transparent"){
    ctx.beginPath();ctx.setLineDash([]);ctx.arc(c,c,r,0,2*Math.PI);
    ctx.strokeStyle=cb;ctx.lineWidth=gB;
    ctx.shadowBlur=sb;ctx.shadowOffsetX=ox;ctx.shadowOffsetY=oy;ctx.shadowColor=cs;
    ctx.stroke();
  }
  if(document.getElementById("bordaContornoAtivo")?.checked){
    const cor=document.getElementById("hexBordaContorno").value,
          g=+document.getElementById("grossuraBordaContorno").value,
          t=document.getElementById("tipoBordaContorno").value;
    ctx.beginPath();ctx.setLineDash(t==="dashed"?[10,10]:t==="dotted"?[2,6]:[]);
    ctx.arc(c,c,r,0,2*Math.PI);ctx.strokeStyle=cor;ctx.lineWidth=g;ctx.stroke();
  }

  if(cc!=="transparent"){
    ctx.beginPath();ctx.setLineDash(tp==="dashed"?[10,10]:tp==="dotted"?[2,6]:[]);
    ctx.arc(c,c,r,ai,af);ctx.strokeStyle=cc;ctx.lineWidth=gC;
    ctx.shadowBlur=sb;ctx.shadowOffsetX=ox;ctx.shadowOffsetY=oy;ctx.shadowColor=cs;
    ctx.stroke();
  }
  if(document.getElementById("circuloContornoAtivo")?.checked){
    const cor=document.getElementById("hexCirculoContorno").value,
          g=+document.getElementById("grossuraCirculoContorno").value,
          t=document.getElementById("tipoCirculoContorno").value;
    ctx.beginPath();ctx.setLineDash(t==="dashed"?[10,10]:t==="dotted"?[2,6]:[]);
    ctx.arc(c,c,r,ai,af);ctx.strokeStyle=cor;ctx.lineWidth=g;ctx.stroke();
  }

  ctx.fillStyle=ct;ctx.shadowBlur=sb;ctx.shadowOffsetX=ox;ctx.shadowOffsetY=oy;ctx.shadowColor=cs;
  ctx.font=`bold ${ft}px Arial`;ctx.textAlign="center";ctx.textBaseline="middle";
  ctx.fillText(rest.toString(),c,c);

  if(document.getElementById("textoContornoAtivo")?.checked){
    const cor=document.getElementById("hexTextoContorno").value,
          g=+document.getElementById("grossuraTextoContorno").value,
          t=document.getElementById("tipoTextoContorno").value;
    ctx.beginPath();ctx.setLineDash(t==="dashed"?[10,10]:t==="dotted"?[2,6]:[]);
    ctx.strokeStyle=cor;ctx.lineWidth=g;ctx.strokeText(rest.toString(),c,c);
  }
}

/* ========== CONTAGEM + CAPTURA ========== */
function iniciarContagem(){
  desabilitarControles();
  frames=[];
  status.textContent="Gerando…";
  gifDownload.innerHTML="<p>Processando…</p>";

  const fps=60, dur=tempoTotal*1000, passo=1000/fps;
  const start=performance.now();
  let last=-passo;                     // evita captura no t=0

  ctxPrev.imageSmoothingEnabled=false;
  desenhar(ctxPrev,0,tempoTotal);      // preview inicial

  function loop(now){
    const el   = now - start;
    const prog = Math.min(el/dur,1);
    const rest = Math.ceil((dur-el)/1000);

    desenhar(ctxPrev, prog, rest);     // preview
    desenhar(ctxHi,   prog, rest);     // hi‑res

    if (prog>0 && now - last >= passo){
      frames.push(hiCanvas.toDataURL("image/png"));
      last = now;
    }

    if (el < dur){
      requestAnimationFrame(loop);
    }else{
      status.textContent="Enviando…";
      gifDownload.innerHTML="<p>Enviando…</p>";
      enviarParaServidor(frames);
    }
  }
  requestAnimationFrame(loop);
}

/* ========== ENVIO AO SERVIDOR (original) ========== */
function enviarParaServidor(frames){
  fetch("/api/gerar-gif",{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({frames})
  })
  .then(r=>r.json())
  .then(d=>{
    if(d.url){
      status.textContent="GIF gerado com sucesso!";
      gifDownload.innerHTML=`GIF pronto: <a href="${d.url}" target="_blank">Baixar</a>`;
    }else{
      status.textContent="Erro ao gerar GIF.";
      gifDownload.innerHTML="<p>Erro ao gerar GIF.</p>";
    }
    habilitarControles();
  })
  .catch(()=>{
    status.textContent="Erro na comunicação com o servidor.";
    gifDownload.innerHTML="<p>Erro na comunicação com o servidor.</p>";
    habilitarControles();
  });
}

/* ========== RESETAR PADRÕES (original completo) ========== */
function resetarPadroes(){
  /* ----- TIMER ----- */
  document.getElementById("initialTime").value = 30;
  tempoTotal = 30;

  /* ----- CÍRCULO ----- */
  document.getElementById("circuloTransparente").checked = false;
  document.getElementById("corCirculo").value = "#4A90E2";
  document.getElementById("hexCirculo").value = "#4A90E2";
  document.getElementById("grossuraCirculo").value = 28;
  document.getElementById("displayGrossuraCirculo").textContent = 28;
  document.getElementById("circuloContornoAtivo").checked = false;
  document.getElementById("grupoCirculoContorno").style.display = "none";
  document.getElementById("corCirculoContorno").value = "#000000";
  document.getElementById("hexCirculoContorno").value = "#000000";
  document.getElementById("grossuraCirculoContorno").value = 2;
  document.getElementById("displayGrossuraCirculoContorno").textContent = 2;
  document.getElementById("tipoCirculoContorno").value = "solid";

  /* ----- BORDA ----- */
  document.getElementById("bordaTransparente").checked = false;
  document.getElementById("corBorda").value = "#2D3E50";
  document.getElementById("hexBorda").value = "#2D3E50";
  document.getElementById("grossuraBorda").value = 5;
  document.getElementById("displayGrossuraBorda").textContent = 5;
  document.getElementById("bordaContornoAtivo").checked = false;
  document.getElementById("grupoBordaContorno").style.display = "none";
  document.getElementById("corBordaContorno").value = "#000000";
  document.getElementById("hexBordaContorno").value = "#000000";
  document.getElementById("grossuraBordaContorno").value = 2;
  document.getElementById("displayGrossuraBordaContorno").textContent = 2;
  document.getElementById("tipoBordaContorno").value = "solid";

  /* ----- TEXTO ----- */
  document.getElementById("corTexto").value = "#ffffff";
  document.getElementById("hexTexto").value = "#ffffff";
  document.getElementById("tamanhoTexto").value = 90;
  document.getElementById("displayTamanhoTexto").textContent = 90;
  document.getElementById("textoContornoAtivo").checked = false;
  document.getElementById("grupoTextoContorno").style.display = "none";
  document.getElementById("corTextoContorno").value = "#000000";
  document.getElementById("hexTextoContorno").value = "#000000";
  document.getElementById("grossuraTextoContorno").value = 2;
  document.getElementById("displayGrossuraTextoContorno").textContent = 2;
  document.getElementById("tipoTextoContorno").value = "solid";

  /* ----- FUNDO ----- */
  document.getElementById("fundoTransparente").checked = true;
  document.getElementById("corFundo").value = "#000000";
  document.getElementById("hexFundo").value = "transparent";
  document.getElementById("corFundo").disabled = true;
  document.getElementById("hexFundo").disabled = true;
  document.getElementById("fundoContornoAtivo").checked = false;
  document.getElementById("grupoFundoContorno").style.display = "none";
  document.getElementById("corFundoContorno").value = "#000000";
  document.getElementById("hexFundoContorno").value = "#000000";
  document.getElementById("grossuraFundoContorno").value = 2;
  document.getElementById("displayGrossuraFundoContorno").textContent = 2;
  document.getElementById("tipoFundoContorno").value = "solid";

  /* ----- SOMBRA ----- */
  document.getElementById("sombraTransparente").checked = false;
  document.getElementById("corSombra").value = "#000000";
  document.getElementById("hexSombra").value = "#000000";
  document.getElementById("corSombra").disabled = false;
  document.getElementById("hexSombra").disabled = false;
  document.getElementById("grupoSombra").style.display = "block";
  document.getElementById("sombra").value = 8;
  document.getElementById("sombraX").value = 4;
  document.getElementById("sombraY").value = 4;
  sombraAnterior = "#000000";

  /* ----- TRAÇADO ----- */
  document.getElementById("tipoTraco").value = "solid";

  /* ----- Atualiza preview ----- */
  desenhar(ctxPrev,0,tempoTotal);
}

/* ========== INICIALIZAÇÃO ========== */
document.addEventListener("DOMContentLoaded",()=>{
  tempoTotal = +document.getElementById("initialTime").value || 30;
  ["circulo","borda","texto","fundo"].forEach(toggleContorno);
  toggleSombra();
  desenhar(ctxPrev,0,tempoTotal);      // preview vazio
});
</script>

  
  

  
  
  
  
  
  
</body>
</html>