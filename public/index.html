<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Countdown GIF</title>
    <style>
        * {
          box-sizing: border-box;
        }
    	body {
    	  background: #f4f4f4;
    	  font-family: 'Segoe UI', sans-serif;
    	  margin: 0;
    	  padding: 0;
    	  display: block;
    	}
    
    		body {
    	  background: #f4f4f4;
    	  font-family: 'Segoe UI', sans-serif;
    	  margin: 0;
    	  padding: 0;
    	}
    
    	.wrapper {
    	  display: flex;
    	  justify-content: center;
    	  padding: 20px;
    	}
    
        .container {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: 10px;
          width: 100%;
          max-width: 1440px;
        }
        .col {
          display: flex;
          flex-direction: column;
          gap: 10px;
        }
    
    .secao {
      margin: 0;
      padding: 0;
      border-bottom: 1px solid #ddd;
      border-radius: 0;
      background-color: #f9f9f9;
    }
    
    .secao:last-child {
      border-bottom: none;
    }
    
    .secao h2 {
      margin: 0;
      padding: 10px 12px;
      background-color: #eaeaea;
      font-size: 14px;
      font-weight: bold;
      color: #333;
      border: none;
      border-radius: 0;
      line-height: 1.2;
    }
    
    .conteudo-secao {
      margin: 0;
      padding: 12px;
      background-color: #fff;
    }
    
        .grupo {
          margin-bottom: 8px;
        }
        .grupo label {
          display: block;
          font-size: 14px;
          font-weight: 500;
          color: #333;
          margin-bottom: 4px;
        }
        .linha-color {
          display: flex;
          gap: 8px;
          align-items: center;
        }
        .linha-color input[type="color"] {
          width: 40px;
          height: 40px;
          border: none;
          background: none;
        }
        .linha-color input[type="text"] {
          flex: 1;
          padding: 8px;
          border-radius: 6px;
          border: 1px solid #ccc;
          font-size: 14px;
        }
        .linha-check {
          display: flex;
          align-items: center;
          gap: 8px;
          margin-bottom: 8px;
        }
        select, input[type="range"], input[type="number"] {
          width: 100%;
          padding: 8px;
          font-size: 14px;
          border-radius: 6px;
          border: 1px solid #ccc;
        }
    
    button {
      width: 100%;
      padding: 14px;
      border: none;
      border-radius: 10px;
      font-weight: 600;
      font-size: 16px;
      transition: all 0.3s ease;
      cursor: pointer;
      margin-bottom: 10px;
    }
    
    button:not(.btn-reset):not(#cancelButton) {
      background: #28a745;
      color: #fff;
      font-weight: 600;
      font-size: 15px;
      border-radius: 8px;
      padding: 10px 20px;
      border: none;
      cursor: pointer;
    animation: vibrateGlowLoop 4s ease-in-out infinite;
      transition: transform 0.2s ease;
      width: auto;
      display: inline-block;
    }
    
    .btn-reset,
    #cancelButton {
      background: #6c757d;
      color: #fff;
      font-weight: 600;
      font-size: 15px;
      border-radius: 8px;
      padding: 10px 20px;
      border: none;
      cursor: pointer;
      animation: vibrateFast 0.4s linear infinite;
      transition: transform 0.2s ease;
      width: auto;
      display: inline-block;
    }
    
    button:not(.btn-reset):not(#cancelButton):hover {
      background: #218838;
      transform: scale(1.08);
      animation: none !important;
    }
    
    #cancelButton:hover {
      background: linear-gradient(45deg, #ff4d4d, #c82333);
      transform: scale(1.08);
      animation: none !important;
    }
    
    .btn-reset:hover {
      background: #5a6268;
      transform: scale(1.08);
      animation: none !important;
    }
    
    @keyframes vibrateGlowLoop {
      0% {
        transform: translateX(0);
        box-shadow: none;
      }
      10% {
        transform: translateX(-1px);
      }
      20% {
        transform: translateX(1px);
      }
      30% {
        transform: translateX(-1px);
      }
      40% {
        transform: translateX(1px);
      }
      50% {
        transform: translateX(0);
        box-shadow: 0 0 8px rgba(40, 167, 69, 0.6);
      }
      60% {
        box-shadow: 0 0 12px rgba(40, 167, 69, 0.7);
      }
      70% {
        box-shadow: 0 0 8px rgba(40, 167, 69, 0.6);
      }
      80% {
        box-shadow: none;
      }
      100% {
        transform: translateX(0);
        box-shadow: none;
      }
    }
    
    .btn-reset {
      background: #6c757d;
      color: white;
      font-size: 15px;
      box-shadow: 0 4px 10px rgba(108, 117, 125, 0.3);
    }
    
    .btn-reset:hover {
      background: #5a6268;
    }
    
    button:disabled {
      background: #bbb !important;
      color: #eee !important;
      box-shadow: none !important;
      cursor: not-allowed;
    }
    
        #status {
          margin-top: 8px;
          text-align: center;
          font-size: 14px;
          color: #666;
        }
        canvas {
          background: transparent;
          border: 1px solid #ccc;
          border-radius: 10px;
          box-shadow: 0 0 8px rgba(0,0,0,0.2);
        }
        .preview {
          text-align: center;
        }
        h1 {
          grid-column: span 4;
          text-align: center;
          font-size: 20px;
          margin-bottom: 10px;
        }
    
    @media (max-width: 768px) {
      .container {
        grid-template-columns: 1fr; 
    	display: flex;
    	flex-direction: column;
    	align-items: stretch;
    
      }
      .col {
        width: 100% !important;
        max-width: 100% !important;
      }
      h1 {
        text-align: center;
        margin-bottom: 20px;
      }
      canvas {
        max-width: 100%;
        height: auto;
      }
    }
    
    .secao.destaque {
      border: 2px solid #ff0000;
      box-shadow: 0 0 12px rgba(255, 0, 0, 0.3);
      animation: pulseBorda 1.5s infinite;
      position: relative;
    }
    
    @keyframes pulseBorda {
      0% { box-shadow: 0 0 12px rgba(255, 0, 0, 0.4); }
      50% { box-shadow: 0 0 20px rgba(255, 0, 0, 0.8); }
      100% { box-shadow: 0 0 12px rgba(255, 0, 0, 0.4); }
    }
    
    #progressBarOuter {
      width: 60%;
      height: 20px;
      background-color: #e0e0e0;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: inset 0 1px 3px rgba(0,0,0,0.2);
      margin: 20px auto 5px auto; 
    }
    
    #progressBarInner {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #28a745, #45c46a);
      transition: width 0.3s ease;
      border-radius: 10px 0 0 10px;
    }
    
    #progressPercent {
      text-align: center;
      font-size: 14px;
      color: #444;
      margin-top: 5px;
      font-weight: bold;
    }
    
        .secao h2 {
        cursor: pointer;
        user-select: none;
        position: relative;
        padding-right: 20px;
      }
    
      .secao h2::after {
        content: "▼";
        position: absolute;
        right: 10px;
        font-size: 12px;
        transition: transform 0.3s ease;
      }
    
      .secao.fechada h2::after {
        transform: rotate(-90deg);
      }
    
      .conteudo-secao {
        display: none;
        overflow: hidden;
        transition: all 0.3s ease;
      }
    
      .secao.aberta .conteudo-secao {
        display: block;
      }
    
    #initialTime {
      font-size: 24px; 
      text-align: center; 
      font-weight: bold; 
    }
    
    #initialTime.error {
      border: 2px solid red;
      background-color: #ffe6e6;
    }
    
    .dica-erro {
      color: red;
      font-size: 12px;
      display: none;
      margin-top: 4px;
    }
    
    .secao h2:hover {
      background: linear-gradient(90deg, #ff6a00, #ee0979);
      color: #fff;
      border-radius: 8px;
      padding: 8px;
      box-shadow: 0 0 12px rgba(255, 105, 180, 0.7), 0 0 25px rgba(255, 105, 180, 0.5);
      letter-spacing: 1px;
      transition: all 0.3s ease;
      text-shadow: 0 0 6px rgba(255, 255, 255, 0.6);
      cursor: pointer;
      animation: brilhoGlow 1.2s infinite alternate;
    }
    
    @keyframes brilhoGlow {
      0% {
        box-shadow: 0 0 8px rgba(255, 105, 180, 0.4), 0 0 16px rgba(255, 105, 180, 0.3);
      }
      100% {
        box-shadow: 0 0 16px rgba(255, 105, 180, 0.9), 0 0 32px rgba(255, 105, 180, 0.7);
      }
    }
    
    .fade-box {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #e6f5ff; 
      padding: 30px 40px;
      border-radius: 14px;
      box-shadow: 0 0 20px rgba(0,0,0,0.2);
      text-align: center;
      z-index: 9999;
      opacity: 0;
      transition: opacity 2s ease;
      font-family: 'Segoe UI', sans-serif;
    }
    
    .fade-box.show {
      display: block;
      opacity: 1;
    }
    
    .fade-box.hide {
      opacity: 0;
      transition: opacity 2s ease;
    }
    
    .fade-box .mensagem {
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 15px;
      color: #005f87;
    }
    
    .loader {
      border: 6px solid #f3f3f3;
      border-top: 6px solid #28a745;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      margin: 0 auto;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    #avisoPreview {
      display: none;
      opacity: 0;
      position: fixed;
      top: 40%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #fffbe6;
      color: #ff8c00;
      padding: 20px 30px;
      font-size: 18px;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
      text-align: center;
      font-weight: bold;
      z-index: 9999;
      transition: opacity 2s ease;
    }
    
    #avisoPreview.show {
      opacity: 1;
    }
    
    #avisoPreview.hide {
      opacity: 0;
    }
    
    #avisoPreview .spinner {
      margin: 10px auto 0 auto;
      width: 24px;
      height: 24px;
      border: 4px solid #f3f3f3;
      border-top: 4px solid #ff9900;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      display: block;
    }
    
    @keyframes girar {
      to {
        transform: rotate(360deg);
      }
    }
    
    .switch {
      position: relative;
      display: inline-block;
      width: 52px;
      height: 28px;
    }
    
    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    
    #headerTema {
      display: flex;
      justify-content: space-between; 
      align-items: center;
      padding: 12px 24px;
      background-color: #111;
      color: #fff;
      position: sticky;
      top: 0;
      z-index: 999;
      border-bottom: 1px solid #333;
    }
    
    @media (max-width: 600px) {
      #headerTema {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
      }
    }
    
    .switch {
      position: relative;
      display: inline-block;
      width: 52px;
      height: 28px;
    }
    
    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    
    .slider {
      position: absolute;
      cursor: pointer;
      top: 0; left: 0; right: 0; bottom: 0;
      background-color: #ccc;
      transition: .4s;
      border-radius: 34px;
    }
    
    .slider:before {
      position: absolute;
      content: "";
      height: 22px;
      width: 22px;
      left: 3px;
      bottom: 3px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }
    
    input:checked + .slider {
      background-color: #2196F3;
    }
    
    input:checked + .slider:before {
      transform: translateX(24px);
    }
    
    body.dark-mode {
      background-color: #0d0d17 !important;
      color: #e6e0f9;
    }
    
    body.dark-mode .secao.fechada {
      background-color: #f9f9f9 !important;
      color: #111 !important;
      border-color: #ddd !important;
    }
    
    body.dark-mode .col {
      gap: 0 !important;
    }
    body.dark-mode .container {
      gap: 0 !important;
    }
    
    body.dark-mode .secao {
      margin: 0 0 8px 0 !important;
      padding: 0 !important;
      border-radius: 6px;
      border: none;
      background-color: #140826;
      box-shadow: 0 0 4px rgba(160, 102, 255, 0.08);
    }
    body.dark-mode .secao:last-child {
      margin-bottom: 0 !important;
      border-bottom: none;
    }
    
    body.dark-mode .secao h2 {
      margin: 0 !important;
      padding: 10px 12px !important;
      background-color: #1b0f2e;
      border: none;
      font-size: 14px;
      color: #e6e0f9;
      border-top-left-radius: 6px;
      border-top-right-radius: 6px;
    }
    
    body.dark-mode .secao.aberta h2 {
      color: #ffd86a !important;
      background-color: #25113f;
      text-shadow: 0 0 6px rgba(255, 216, 106, 0.4);
      box-shadow: 0 0 6px rgba(255, 216, 106, 0.25);
      transition: all 0.3s ease;
    }
    
    body.dark-mode .conteudo-secao {
      margin: 0 !important;
      padding: 12px !important;
      background-color: #150924;
      border-bottom-left-radius: 6px;
      border-bottom-right-radius: 6px;
    }
    
    body.dark-mode .conteudo-secao input,
    body.dark-mode .conteudo-secao select,
    body.dark-mode .conteudo-secao textarea {
      background-color: #fff !important;
      color: #111 !important;
      border: 1px solid #a066ff !important;
    }
    body.dark-mode .conteudo-secao input[type="range"]::-webkit-slider-thumb {
      background: #a066ff;
    }
    body.dark-mode .conteudo-secao input[type="range"] {
      background: #ddd;
    }
    
    body.dark-mode .secao .conteudo-secao label,
    body.dark-mode .secao .conteudo-secao span,
    body.dark-mode .secao .conteudo-secao legend,
    body.dark-mode .secao .conteudo-secao p {
      color: #ffffff !important;
    }
    
    #modoTexto {
      font-size: 14px;
      font-weight: bold;
      color: #cfaaff;
      text-shadow: 0 0 5px #cfaaff, 0 0 10px #a066ff, 0 0 20px #8f00ff;
    }
    
    .header-center {
      flex: 1;
      display: flex;
      justify-content: center;
    }
    
    #headerTema {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 24px;
      background-color: #111;
      color: #fff;
      position: sticky;
      top: 0;
      z-index: 999;
      border-bottom: 1px solid #333;
    }
    
    .toggles-header {
      display: flex;
      align-items: center;
      gap: 18px;
    }
    
    @media (max-width: 600px) {
      #headerTema {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
      }
    
      .toggles-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
      }
    }
    
    .premium-switch {
      display: flex;
      align-items: center;
    }
    
    .switch {
      position: relative;
      display: inline-block;
      width: 60px;
      height: 34px;
    }
    
    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    
    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #ccc;
      transition: 0.4s;
      border-radius: 50px;
    }
    
    .slider:before {
      position: absolute;
      content: "";
      height: 26px;
      width: 26px;
      border-radius: 50px;
      left: 4px;
      bottom: 4px;
      background-color: white;
      transition: 0.4s;
    }
    
    input:checked + .slider {
      background-color: #4caf50;
    }
    
    input:checked + .slider:before {
      transform: translateX(26px);
    }
    
    @media (min-width: 768px) {
      .botoes-acoes {
        display: flex;
        justify-content: center;
        gap: 20px; 
        flex-wrap: wrap;
      }
    
      .botoes-acoes button {
        flex: 0 0 auto;
      }
    }
    
    button:not(.btn-reset):not(#cancelButton)
    .btn-reset,
    #cancelButton
    
    @keyframes pulseGlowRed {
      0%   { box-shadow: 0 0 6px rgba(255, 0, 0, 0.4); }
      50%  { box-shadow: 0 0 18px rgba(255, 0, 0, 0.9); }
      100% { box-shadow: 0 0 6px rgba(255, 0, 0, 0.4); }
    }
    
    #mensagemErroPremium {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: linear-gradient(135deg, #ff4e4e, #ff0000);
      color: white;
      padding: 14px 22px;
      border-radius: 10px;
      box-shadow: 0 0 15px rgba(255, 0, 0, 0.7);
      font-weight: bold;
      z-index: 9999;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.4s ease-in-out;
      font-size: 16px;
      text-align: center;
    }
    #mensagemErroPremium.show {
      opacity: 1;
    }
	
	/* Estilos da Caixa de Confirmação Personalizada */
	.confirm-box {
	  display: none; /* inicialmente oculta */
	  position: fixed;
	  top: 0;
	  left: 0;
	  width: 100%;
	  height: 100%;
	  background: rgba(0,0,0,0.7);
	  justify-content: center;
	  align-items: center;
	  z-index: 9999;
	}

	.confirm-conteudo {
	  background: #ffffff;
	  padding: 20px 30px;
	  border-radius: 10px;
	  text-align: center;
	  box-shadow: 0 4px 15px rgba(0,0,0,0.3);
	}

	.confirm-conteudo p {
	  font-size: 16px;
	  margin-bottom: 20px;
	  color: #333;
	}

	.btn-confirm, .btn-cancel {
	  padding: 10px 15px;
	  font-size: 14px;
	  border-radius: 6px;
	  border: none;
	  cursor: pointer;
	  margin: 5px;
	  transition: transform 0.3s;
	}

	.btn-confirm {
	  background: #28a745;
	  color: #fff;
	}

	.btn-cancel {
	  background: #dc3545;
	  color: #fff;
	}

	.btn-confirm:hover, .btn-cancel:hover {
	  transform: scale(1.1);
	}

	
	
	
    </style>

    <script>
        let bloquearAvisoInicial = true;
    </script>

    <script>
        function exibirMensagemErro(mensagem) {
          const msgBox = document.getElementById("mensagemErroPremium");
          msgBox.textContent = mensagem;
          msgBox.classList.add("show");
        
          setTimeout(() => {
            msgBox.classList.remove("show");
          }, 10000);
        }
    </script>

</head>

<body>

    <header id="headerTema">
        <h1 style="margin: 0;">countdowngif.com</h1>

        <div class="header-center">
            <div id="sejaPremiumContainer">
                <div class="premium-switch">
                    <span class="label-premium" id="premiumTexto">👑 Seja Premium</span>
                    <label class="switch">
                        <input type="checkbox" id="modoPremiumToggle">
                        <span class="slider"></span>
                    </label>
                </div>
            </div>
        </div>

        <div class="toggles-header">
            <span id="modoStatus">☀️ Ativar dark mode!</span>
            <label class="switch">
                <input type="checkbox" id="modoToggle">
                <span class="slider"></span>
            </label>
        </div>

    </header>

    <div class="wrapper">

        <div class="container">
            <h1>Cronômetro com GIF</h1>

            <!-- Coluna 1: Timer, Círculo e Borda -->
            <div class="col">

                <!-- A estrutura completa com todas as seções do body em formato accordion -->

                <!-- Seção 1: Tempo do Timer -->
                <div class="secao aberta">
                    <h2>Tempo do Cronômetro</h2>
                    <div class="conteudo-secao">
                        <span style="color: red; font-weight: bold; font-size: 13px;">👇 Comece por aqui!</span>

                        <div class="grupo">
                            <label for="presetEstilo">🎨 Escolha um estilo visual pronto:</label>
                            <select id="presetEstilo" onchange="carregarPreset(this.value)">
                                <option value="">⏬ Selecione um modelo</option>
                                <option value="aurora-neon">🌈 Aurora Neon</option>
                                <option value="black-ceo">🕴️ Black CEO</option>
                                <option value="bubblegum-pop">🍬 Bubblegum Pop</option>
                                <option value="classic-gold">💛 Classic Gold</option>
                                <option value="cyber-grid">🔳 Cyber Grid</option>
                                <option value="dark-neon">🌌 Dark Neon</option>
                                <option value="deep-sea">🌊 Deep Sea</option>
                                <option value="electric-vibes">⚡ Electric Vibes</option>
                                <option value="forest-bliss">🌲 Forest Bliss</option>
                                <option value="futuristic-ice">🧊 Futuristic Ice</option>
                                <option value="glitch-alert">🌀 Glitch Alert</option>
                                <option value="lava-pulse">🌋 Lava Pulse</option>
                                <option value="matrix-code">🟢 Matrix Code</option>
                                <option value="minimal-clean">🧼 Minimal Clean</option>
                                <option value="pink-sakura">🌸 Pink Sakura</option>
                                <option value="red-urgency">🚨 Red Urgency</option>
                                <option value="space-night">🌌 Space Night</option>
                                <option value="sunset-wave">🌇 Sunset Wave</option>
                                <option value="toxic-slime">🧪 Toxic Slime</option>
                                <option value="vintage-clock">🕰️ Vintage Clock</option>
                                <option value="zen-wood">🌿 Zen Wood</option>
                            </select>

                        </div>

                        <div class="grupo">
                            <label for="initialTime">Defina o tempo inicial (segundos):</label>
                            <input type="text" id="initialTime" value="30" inputmode="numeric" pattern="[0-9]*" />
                            <small id="dicaErro" class="dica-erro">Digite apenas números</small>
                        </div>

                    </div>
                </div>

                <!-- Seção 2: Aparência do Objeto Central -->
                <div class="secao fechada">
                    <h2>Tipo e Tamanho do Cronômetro</h2>
                    <div class="conteudo-secao">
                        <div class="grupo">
                            <label for="tipoCronometro">Tipo de cronômetro:</label>

                            <select id="tipoCronometro">
                                <option value="padrao">⭕ Círculo Padrão</option>
                                <option value="coracao">❤️ Coração</option>
                                <option value="pegada">🐾 Pegada de Pet</option>
                                <option value="ampulheta">⏳ Ampulheta</option>
                                <option value="fogo">🔥 Fogo</option>
                                <option value="relampago">⚡ Relâmpago</option>
                                <option value="caveira">💀 Caveira</option>
                                <option value="folha">🍃 Folha</option>
                                <option value="olho">👁️ Olho</option>
                                <option value="bomba">💣 Bomba</option>
                                <option value="barra-horizontal">📊 Barra Horizontal</option>
                                <option value="barra-vertical">📈 Barra Vertical</option>
                                <option value="digital">🕐 Relógio Digital</option>
                                <option value="pizza">🍕 Pizza</option>
                                <option value="cadeado">🔒 Cadeado</option>
                                <option value="cerebro">🧠 Cérebro</option>
                                <option value="gelo">🧊 Gelo Derretendo</option>
                                <option value="microfone">🎤 Microfone</option>
                            </select>

                        </div>

                        <div class="grupo">
                            <label for="tamanhoObjetoCentral">Tamanho do objeto central: <span id="displayTamanhoObjetoCentral">100</span>%</label>
                            <input type="range" id="tamanhoObjetoCentral" min="50" max="150" value="100" />
                        </div>
                    </div>
                </div>

                <div class="secao fechada">
                    <h2>Configuração do Círculo</h2>
                    <div class="conteudo-secao">
                        <div class="grupo">
                            <div class="linha-check">
                                <input type="checkbox" id="circuloTransparente" onchange="atualizarCampo('circulo')">
                                <label for="circuloTransparente">Círculo transparente</label>
                            </div>
                            <label>Cor do círculo:</label>
                            <div class="linha-color">
                                <input type="color" id="corCirculo" value="#4A90E2" />
                                <input type="text" id="hexCirculo" value="#4A90E2" />
                            </div>
                        </div>
                        <div class="grupo">
                            <label for="grossuraCirculo">Grossura do círculo: <span id="displayGrossuraCirculo">28</span> px</label>
                            <input type="range" id="grossuraCirculo" min="1" max="40" value="28" />
                        </div>
                        <div class="grupo">
                            <div class="linha-check">
                                <input type="checkbox" id="circuloContornoAtivo" onchange="toggleContorno('circulo')">
                                <label for="circuloContornoAtivo">Ativar contorno do círculo</label>
                            </div>
                        </div>
                        <div id="grupoCirculoContorno" style="display: none;">
                            <div class="grupo">
                                <label>Cor do contorno do círculo:</label>
                                <div class="linha-color">
                                    <input type="color" id="corCirculoContorno" value="#000000" />
                                    <input type="text" id="hexCirculoContorno" value="#000000" />
                                </div>
                            </div>
                            <div class="grupo">
                                <label for="grossuraCirculoContorno">Grossura do contorno: <span id="displayGrossuraCirculoContorno">2</span> px</label>
                                <input type="range" id="grossuraCirculoContorno" min="1" max="20" value="2" />
                            </div>
                            <div class="grupo">
                                <label>Tipo de linha:</label>
                                <select id="tipoCirculoContorno">
                                    <option value="solid">Sólido</option>
                                    <option value="dashed">Tracejado</option>
                                    <option value="dotted">Pontilhado</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="secao fechada">
                    <h2>Configuração da Borda</h2>
                    <div class="conteudo-secao">
                        <div class="grupo">
                            <div class="linha-check">
                                <input type="checkbox" id="bordaTransparente" onchange="atualizarCampo('borda')">
                                <label for="bordaTransparente">Borda transparente</label>
                            </div>
                            <label>Cor da borda:</label>
                            <div class="linha-color">
                                <input type="color" id="corBorda" value="#2E2E2E" />
                                <input type="text" id="hexBorda" value="#2E2E2E" />
                            </div>
                        </div>
                        <div class="grupo">
                            <label for="grossuraBorda">
                                Grossura da borda: <span id="displayGrossuraBorda">34</span> px
                            </label>
                            <input type="range" id="grossuraBorda" min="1" max="40" value="34" />
                        </div>
                        <div class="grupo">
                            <div class="linha-check">
                                <input type="checkbox" id="bordaContornoAtivo" onchange="toggleContorno('borda')">
                                <label for="bordaContornoAtivo">Ativar contorno da borda</label>
                            </div>
                        </div>
                        <div id="grupoBordaContorno" style="display: none;">
                            <div class="grupo">
                                <label>Cor do contorno da borda:</label>
                                <div class="linha-color">
                                    <input type="color" id="corBordaContorno" value="#000000" />
                                    <input type="text" id="hexBordaContorno" value="#000000" />
                                </div>
                            </div>
                            <div class="grupo">
                                <label for="grossuraBordaContorno">
                                    Grossura do contorno: <span id="displayGrossuraBordaContorno">2</span> px
                                </label>
                                <input type="range" id="grossuraBordaContorno" min="1" max="20" value="2" />
                            </div>
                            <div class="grupo">
                                <label>Tipo de linha:</label>
                                <select id="tipoBordaContorno">
                                    <option value="solid">Sólido</option>
                                    <option value="dashed">Tracejado</option>
                                    <option value="dotted">Pontilhado</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="secao fechada">
                    <h2>Configuração do Texto</h2>
                    <div class="conteudo-secao">
                        <div class="grupo">
                            <label>Cor do texto:</label>
                            <div class="linha-color">
                                <input type="color" id="corTexto" value="#ffffff" />
                                <input type="text" id="hexTexto" value="#ffffff" />
                            </div>
                        </div>
                        <div class="grupo">
                            <label for="tamanhoTexto">Tamanho do texto: <span id="displayTamanhoTexto">90</span> px</label>
                            <input type="range" id="tamanhoTexto" min="10" max="100" value="90" />
                        </div>
                        <div class="grupo">
                            <div class="linha-check">
                                <input type="checkbox" id="textoContornoAtivo" onchange="toggleContorno('texto')">
                                <label for="textoContornoAtivo">Ativar contorno do texto</label>
                            </div>
                        </div>
                        <div id="grupoTextoContorno" style="display: none;">
                            <div class="grupo">
                                <label>Cor do contorno do texto:</label>
                                <div class="linha-color">
                                    <input type="color" id="corTextoContorno" value="#000000" />
                                    <input type="text" id="hexTextoContorno" value="#000000" />
                                </div>
                            </div>
                            <div class="grupo">
                                <label for="grossuraTextoContorno">Grossura do contorno: <span id="displayGrossuraTextoContorno">2</span> px</label>
                                <input type="range" id="grossuraTextoContorno" min="1" max="20" value="2" />
                            </div>
                            <div class="grupo">
                                <label>Tipo de linha:</label>
                                <select id="tipoTextoContorno">
                                    <option value="solid">Sólido</option>
                                    <option value="dashed">Tracejado</option>
                                    <option value="dotted">Pontilhado</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="secao fechada">
                    <h2>Configuração do Fundo</h2>
                    <div class="conteudo-secao">
                        <div class="grupo">
                            <div class="linha-check">
                                <input type="checkbox" id="fundoTransparente" checked onchange="atualizarCampo('fundo')">
                                <label for="fundoTransparente">Fundo transparente</label>
                            </div>
                            <label>Cor do fundo:</label>
                            <div class="linha-color">
                                <input type="color" id="corFundo" value="#000000" disabled />
                                <input type="text" id="hexFundo" value="transparent" disabled />
                            </div>
                        </div>
                        <div class="grupo">
                            <div class="linha-check">
                                <input type="checkbox" id="fundoContornoAtivo" onchange="toggleContorno('fundo')">
                                <label for="fundoContornoAtivo">Ativar contorno do fundo</label>
                            </div>
                        </div>
                        <div id="grupoFundoContorno" style="display: none;">
                            <div class="grupo">
                                <label>Cor do contorno do fundo:</label>
                                <div class="linha-color">
                                    <input type="color" id="corFundoContorno" value="#000000" />
                                    <input type="text" id="hexFundoContorno" value="#000000" />
                                </div>
                            </div>
                            <div class="grupo">
                                <label for="grossuraFundoContorno">Grossura do contorno: <span id="displayGrossuraFundoContorno">2</span> px</label>
                                <input type="range" id="grossuraFundoContorno" min="1" max="20" value="2" />
                            </div>
                            <div class="grupo">
                                <label>Tipo de linha:</label>
                                <select id="tipoFundoContorno">
                                    <option value="solid">Sólido</option>
                                    <option value="dashed">Tracejado</option>
                                    <option value="dotted">Pontilhado</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="secao fechada">
                    <h2>Configuração da Sombra</h2>
                    <div class="conteudo-secao">
                        <div class="grupo">
                            <div class="linha-check">
                                <input type="checkbox" id="sombraTransparente" onchange="toggleSombra()">
                                <label for="sombraTransparente">Sombra transparente</label>
                            </div>
                            <label>Cor da sombra:</label>
                            <div class="linha-color">
                                <input type="color" id="corSombra" value="#000000" />
                                <input type="text" id="hexSombra" value="#000000" />
                            </div>
                        </div>
                        <div id="grupoSombra">
                            <div class="grupo">
                                <label>Intensidade da sombra:</label>
                                <input type="range" id="sombra" min="0" max="30" value="8" />
                            </div>
                            <div class="grupo">
                                <label>Direção da sombra (horizontal):</label>
                                <input type="range" id="sombraX" min="-30" max="30" value="4" />
                            </div>
                            <div class="grupo">
                                <label>Direção da sombra (vertical):</label>
                                <input type="range" id="sombraY" min="-30" max="30" value="4" />
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Valor Inicial do Timer -->
                <div class="secao destaque" style="display: none;">
                </div>
                <!-- Configuração do Círculo -->
                <div class="secao" style="display: none;">
                </div>
                <!-- Configuração da Borda -->
                <div class="secao" style="display: none;">
                    <h2>Configuração da Borda</h2>
                    <div class="grupo">
                        <div class="linha-check">
                            <input type="checkbox" id="bordaTransparente" onchange="atualizarCampo('borda')">
                            <label for="bordaTransparente">Borda transparente</label>
                        </div>
                        <label>Cor da borda:</label>
                        <div class="linha-color">
                            <input type="color" id="corBorda" value="#2D3E50" />
                            <input type="text" id="hexBorda" value="#2D3E50" />
                        </div>
                    </div>
                    <div class="grupo">
                        <label for="grossuraBorda">
                            Grossura da borda: <span id="displayGrossuraBorda">5</span> px
                        </label>
                        <input type="range" id="grossuraBorda" min="1" max="40" value="5" />
                    </div>
                    <div class="grupo">
                        <div class="linha-check">
                            <input type="checkbox" id="bordaContornoAtivo" onchange="toggleContorno('borda')">
                            <label for="bordaContornoAtivo">Ativar contorno da borda</label>
                        </div>
                    </div>
                    <div id="grupoBordaContorno" style="display: none;">
                        <div class="grupo">
                            <label>Cor do contorno da borda:</label>
                            <div class="linha-color">
                                <input type="color" id="corBordaContorno" value="#000000" />
                                <input type="text" id="hexBordaContorno" value="#000000" />
                            </div>
                        </div>
                        <div class="grupo">
                            <label for="grossuraBordaContorno">
                                Grossura do contorno: <span id="displayGrossuraBordaContorno">2</span> px
                            </label>
                            <input type="range" id="grossuraBordaContorno" min="1" max="20" value="2" />
                        </div>
                        <div class="grupo">
                            <label>Tipo de linha:</label>
                            <select id="tipoBordaContorno">
                                <option value="solid">Sólido</option>
                                <option value="dashed">Tracejado</option>
                                <option value="dotted">Pontilhado</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Coluna 2: Texto e Fundo -->
                <div class="col" style="display: none;">
                </div>
            </div>

            <!-- Seção: Ações (botões agrupados) -->
            <div class="secao">
                <div id="status">Aguardando...</div>

                <!-- Coluna 4: Pré-visualização e GIF final para download -->
                <div class="col preview">
                    <div class="secao">
                        <canvas id="canvas" width="500" height="500" style="width:300px;height:300px;"></canvas>

                        <a href="#" id="mostrarPreview" style="font-size: 14px; color: #007bff; text-decoration: none; pointer-events: auto; opacity: 1;">
                            <br> 🔁 CLIQUE AQUI para mostrar somente o timer funcionando
                        </a>
                        <br>
                        <br>

                        <div style="margin-top: 10px; display: flex; align-items: center; justify-content: center; gap: 10px;">
                            <span>🌟Fundo transparente?➡️</span>
                            <label class="switch">
                                <input type="checkbox" id="fundoTransparenteAtalho">
                                <span class="slider"></span>
                            </label>
                        </div>
                        <br>

                        <div class="botoes-acoes">
                            <button id="generateButton" onclick="iniciarContagem()">Gerar GIF Final</button>
                            <button id="cancelButton" onclick="cancelProcess()" style="display: none;">Cancelar</button>
                            <button id="resetButton" class="btn-reset">Resetar Padrões</button>
                        </div>

                        <div id="avisoPreview" class="fade-box">
                            <div class="mensagem">Teste iniciando...</div>
                            <div class="loader"></div>
                        </div>

                    </div>
                    <div class="secao">
                        <h3>GIF Final para Download</h3>
                        <div id="gifDownload">
                            <p>Aguardando...</p>

                        </div>
                        <div id="progressWrapper" style="margin-top: 12px;">
                            <div id="progressBarOuter">
                                <div id="progressBarInner"></div>
                            </div>
                            <div id="progressPercent">0%</div>
                        </div>

                    </div>
                </div>

                <!-- Traçado do Círculo -->
                <div class="secao">
                    <div style="display:none;">
                        <select id="tipoTraco">
                            <option value="solid" selected>Sólido</option>
                            <option value="dashed">Tracejado</option>
                            <option value="dotted">Pontilhado</option>
                        </select>
                    </div>

                </div>

            </div>

            <div id="mensagemErroPremium">Mensagem de erro aqui...</div>
			
			<div id="confirmResetBox" class="confirm-box">
			  <div class="confirm-conteudo">
				<p>⚠️ <strong>Você tem certeza?</strong><br>Tudo que foi editado será perdido!</p>
				<button id="confirmarReset" class="btn-confirm">✅ Sim, resetar</button>
				<button id="cancelarReset" class="btn-cancel">❌ Não, cancelar</button>
			  </div>
			</div>


            <script>
                const fundoOriginal = document.getElementById('fundoTransparente');
                  const fundoAtalho = document.getElementById('fundoTransparenteAtalho');
                
                  fundoAtalho.addEventListener('change', () => {
                    fundoOriginal.checked = fundoAtalho.checked;
                    fundoOriginal.dispatchEvent(new Event('change'));
                  });
                
                  fundoOriginal.addEventListener('change', () => {
                    fundoAtalho.checked = fundoOriginal.checked;
                  });
            </script>

            <script>
                document.addEventListener("DOMContentLoaded", () => {
                
                  const secoes = document.querySelectorAll(".secao");
                
                  secoes.forEach((secao, index) => {
                    const titulo = secao.querySelector("h2");
                    const conteudo = secao.querySelector(".conteudo-secao");
                
                    if (index === 0) {
                      secao.classList.add("aberta");
                    } else {
                      secao.classList.add("fechada");
                    }
                
                    titulo?.addEventListener("click", () => {
                      const isAberta = secao.classList.contains("aberta");
                
                      secoes.forEach(s => {
                        s.classList.remove("aberta");
                        s.classList.add("fechada");
                      });
                
                      if (!isAberta) {
                        secao.classList.remove("fechada");
                        secao.classList.add("aberta");
                      }
                    });
                  });
                
					const inputTimer = document.getElementById("initialTime");
					const dicaErro = document.getElementById("dicaErro");

					inputTimer.addEventListener("input", () => {
					  // Remove imediatamente qualquer caractere que não seja número
					  const valorCorrigido = inputTimer.value.replace(/\D/g, '');

					  if (inputTimer.value !== valorCorrigido) {
						inputTimer.value = valorCorrigido; // corrige automaticamente o valor do campo
						dicaErro.style.display = "block";  // mostra o alerta
						inputTimer.classList.add("error"); // estiliza indicando erro

						setTimeout(() => {
						  dicaErro.style.display = "none";  // esconde após 2 segundos automaticamente
						  inputTimer.classList.remove("error");
						}, 2000);
					  } else {
						dicaErro.style.display = "none";  // esconde o alerta caso tudo esteja certo
						inputTimer.classList.remove("error");
					  }
					});

                
                  tempoTotal = +document.getElementById("initialTime").value || 30;
                  resetarPadroes();
                  desenharFrame(0, tempoTotal);
                });
            </script>

            <script>
                const modoPremiumToggle = document.getElementById('modoPremiumToggle');
                const premiumTexto = document.getElementById('premiumTexto');
                
                function atualizarStatusPremium() {
                  const premiumAtivo = modoPremiumToggle.checked;
                  localStorage.setItem("modoPremium", premiumAtivo); 
                
                  if (premiumAtivo) {
                    premiumTexto.textContent = '👑 Você está no modo Premium! ';
                    canvas.classList.remove("marca-dagua");
                  } else {
                    premiumTexto.textContent = '🌟 Seja Premium para mais vantagens! ➡️';
                    canvas.classList.add("marca-dagua");
                  }
                
                  desenharFrame(0, tempoTotal); 
                }
                
                window.addEventListener('DOMContentLoaded', () => {
                  const premiumSalvo = localStorage.getItem("modoPremium") === "true";
                  modoPremiumToggle.checked = premiumSalvo;
                  atualizarStatusPremium();
                
                const modoToggle = document.getElementById("modoToggle");
                const darkSalvo = localStorage.getItem("modoDark") === "true";
                modoToggle.checked = darkSalvo;
                document.body.classList.toggle("dark-mode", darkSalvo);
                
                modoToggle.addEventListener("change", () => {
                  const modoAtivo = modoToggle.checked;
                  localStorage.setItem("modoDark", modoAtivo);
                  document.body.classList.toggle("dark-mode", modoAtivo);
                });
                
                });
                
                modoPremiumToggle.addEventListener('change', atualizarStatusPremium);
            </script>

            <script>
                const LOGICAL_SIZE = 300;                   
                const scale = window.devicePixelRatio || 2; 
                
                const canvas = document.getElementById("canvas");
                canvas.width  = LOGICAL_SIZE * scale;       
                canvas.height = LOGICAL_SIZE * scale;
                canvas.style.width  = LOGICAL_SIZE + "px";    
                canvas.style.height = LOGICAL_SIZE + "px";
                
                const ctx = canvas.getContext("2d");
                ctx.scale(scale, scale);                    
                
                const status      = document.getElementById("status");
                const gifDownload = document.getElementById("gifDownload");
                let frames = [];
                let tempoTotal = parseInt(document.getElementById("initialTime").value) || 30;
                let sombraAnterior = "#000000";
                
                const hex = id => document.getElementById(`hex${id}`).value || "transparent";
                const capitalize = s => s.charAt(0).toUpperCase() + s.slice(1);
                
                function desabilitarControles() {
                  document.querySelectorAll(".container input, .container select, .container button")
                          .forEach(el => el.disabled = true);
                }
                
                function habilitarControles() {
                  document.querySelectorAll(".container input, .container select, .container button")
                          .forEach(el => {
                
                            if (el.id !== "cancelButton") el.disabled = false;
                          });
                
                  if (document.getElementById("fundoTransparente").checked) {
                    document.getElementById("corFundo").disabled = true;
                    document.getElementById("hexFundo").disabled = true;
                  }
                
                  if (document.getElementById("sombraTransparente").checked) {
                    document.getElementById("corSombra").disabled = true;
                    document.getElementById("hexSombra").disabled = true;
                  }
                }
                
                function atualizarCampo(tipo) {
                  if (document.getElementById(`cor${capitalize(tipo)}`) && document.getElementById(`hex${capitalize(tipo)}`)) {
                    const cb = document.getElementById(`${tipo}Transparente`) || document.getElementById(`${tipo}ContornoAtivo`);
                    const color    = document.getElementById(`cor${capitalize(tipo)}`);
                    const hexField = document.getElementById(`hex${capitalize(tipo)}`);
                    if (cb && cb.checked) {
                      hexField.value = "transparent";
                      color.disabled = true;
                      hexField.disabled = true;
                    } else {
                      color.disabled = false;
                      hexField.disabled = false;
                      hexField.value = color.value;
                    }
                  }
                  desenharFrame(0, tempoTotal);
                }
                
                function toggleContorno(tipo) {
                  const check = document.getElementById(`${tipo}ContornoAtivo`);
                  const grupo = document.getElementById(`grupo${capitalize(tipo)}Contorno`);
                  grupo.style.display = check.checked ? "block" : "none";
                  atualizarCampo(`${tipo}Contorno`);
                }
                
                function toggleSombra() {
                  const check      = document.getElementById("sombraTransparente");
                  const grupoSombra = document.getElementById("grupoSombra");
                  const corSombra   = document.getElementById("corSombra");
                  const hexSombra   = document.getElementById("hexSombra");
                
                  if (check.checked) {
                    sombraAnterior = corSombra.value;
                    grupoSombra.style.display = "none";
                    hexSombra.value = "transparent";
                    corSombra.disabled = true;
                    hexSombra.disabled = true;
                  } else {
                    grupoSombra.style.display = "block";
                    corSombra.disabled = false;
                    hexSombra.disabled = false;
                    if (hexSombra.value === "transparent") {
                      corSombra.value = sombraAnterior;
                      hexSombra.value = sombraAnterior;
                    }
                  }
                  desenharFrame(0, tempoTotal);
                }
                
                ["Circulo", "Borda", "Texto", "Fundo", "Sombra",
                 "TextoContorno", "CirculoContorno", "BordaContorno", "FundoContorno"
                ].forEach(tipo => {
                
                  document.getElementById(`cor${tipo}`).addEventListener("input", e => {
                    document.getElementById(`hex${tipo}`).value = e.target.value;
                    desenharFrame(0, tempoTotal);
                  });
                  document.getElementById(`hex${tipo}`).addEventListener("input", e => {
                    document.getElementById(`cor${tipo}`).value = e.target.value;
                    desenharFrame(0, tempoTotal);
                  });
                });
                
                const binds = [
                  ["tamanhoTexto", "displayTamanhoTexto"],
                  ["tamanhoObjetoCentral", "displayTamanhoObjetoCentral"],
                  ["grossuraBordaContorno", "displayGrossuraBordaContorno"],
                  ["grossuraCirculoContorno", "displayGrossuraCirculoContorno"],
                  ["grossuraTextoContorno", "displayGrossuraTextoContorno"],
                  ["grossuraFundoContorno", "displayGrossuraFundoContorno"],
                  ["grossuraCirculo", "displayGrossuraCirculo"],
                  ["grossuraBorda", "displayGrossuraBorda"]
                ];
                binds.forEach(([input, span]) => {
                  document.getElementById(input).addEventListener("input", e => {
                    document.getElementById(span).textContent = e.target.value;
                    desenharFrame(0, tempoTotal);
                  });
                });
                
                document.getElementById("sombra").addEventListener("input", () => desenharFrame(0, tempoTotal));
                document.getElementById("sombraX").addEventListener("input", () => desenharFrame(0, tempoTotal));
                document.getElementById("sombraY").addEventListener("input", () => desenharFrame(0, tempoTotal));
                document.getElementById("tipoTraco").addEventListener("change", () => desenharFrame(0, tempoTotal));
                
                document.getElementById("initialTime").addEventListener("input", () => {
                document.getElementById("tipoCronometro").addEventListener("change", () => {
                  desenharFrame(0, tempoTotal);
                });
                
                  tempoTotal = parseInt(document.getElementById("initialTime").value) || 0;
                  desenharFrame(0, tempoTotal);
                });
                
                 function desenharFrame(progresso, tempoRestante) {
                  const centro = 150, raio = 100;
                  const tipo = document.getElementById("tipoCronometro").value;
                  const anguloInicio = -Math.PI / 2;
                  const anguloFim = anguloInicio + Math.min(progresso, 1) * 2 * Math.PI;
                
                  const corCirculo = hex("Circulo");
                  const corBorda = hex("Borda");
                  const corTexto = hex("Texto");
                  const corSombra = hex("Sombra");
                  const corFundo = hex("Fundo");
                
                  const sombra = +document.getElementById("sombra").value;
                  const offsetX = +document.getElementById("sombraX").value;
                  const offsetY = +document.getElementById("sombraY").value;
                
                  const tamanhoTexto = +document.getElementById("tamanhoTexto").value;
                  const grossuraCirculo = +document.getElementById("grossuraCirculo").value;
                  const grossuraBorda = +document.getElementById("grossuraBorda").value;
                  const escala = +document.getElementById("tamanhoObjetoCentral").value / 100;
                
                  ctx.clearRect(0, 0, LOGICAL_SIZE, LOGICAL_SIZE);
                
                  if (corFundo !== "transparent" && !document.getElementById("fundoTransparente").checked) {
                    ctx.fillStyle = corFundo;
                    ctx.fillRect(0, 0, LOGICAL_SIZE, LOGICAL_SIZE);
                  }
                
                  if (corBorda !== "transparent") {
                    ctx.beginPath();
                    ctx.arc(centro, centro, raio, 0, 2 * Math.PI);
                    ctx.lineWidth = grossuraBorda;
                    ctx.strokeStyle = corBorda;
                    ctx.shadowBlur = sombra;
                    ctx.shadowOffsetX = offsetX;
                    ctx.shadowOffsetY = offsetY;
                    ctx.shadowColor = corSombra;
                    ctx.stroke();
                  }
                
                  ctx.save();
                  ctx.translate(centro, centro);
                  ctx.scale(escala, escala);
                  ctx.shadowBlur = 0;
                  ctx.shadowOffsetX = 0;
                  ctx.shadowOffsetY = 0;
                
                  switch (tipo) {
                  case "padrao":
                    ctx.beginPath();
                    ctx.arc(0, 0, raio, anguloInicio, anguloFim);
                    ctx.lineWidth = grossuraCirculo;
                    ctx.strokeStyle = corCirculo;
                    ctx.lineCap = "round";
                    ctx.stroke();
                    break;
                
                  case "coracao":
                    ctx.save();
                    const pulso = 1 + 0.05 * Math.sin(progresso * 20 * Math.PI);
                    ctx.scale(pulso, pulso);
                    ctx.beginPath();
                    ctx.moveTo(0, -50);
                    ctx.bezierCurveTo(50, -100, 100, 0, 0, 80);
                    ctx.bezierCurveTo(-100, 0, -50, -100, 0, -50);
                    ctx.fillStyle = corCirculo;
                    ctx.fill();
                    ctx.restore();
                    break;
                
                  case "pegada":
                    ctx.save();
                    ctx.globalAlpha = progresso;
                    ctx.fillStyle = corCirculo;
                    ctx.beginPath(); ctx.arc(0, 10, 40, 0, 2 * Math.PI); ctx.fill();
                    [[-45, -25], [-20, -35], [20, -35], [45, -25]].forEach(([dx, dy]) => {
                      ctx.beginPath(); ctx.arc(dx, dy, 18, 0, 2 * Math.PI); ctx.fill();
                    });
                    ctx.globalAlpha = 1;
                    ctx.restore();
                    break;
                
                  case "ampulheta":
                    ctx.save();
                    ctx.strokeStyle = corCirculo;
                    ctx.lineWidth = 4;
                    ctx.beginPath();
                    ctx.moveTo(-40, -60); ctx.lineTo(40, -60);
                    ctx.lineTo(-40, 60); ctx.lineTo(40, 60);
                    ctx.stroke();
                    ctx.fillStyle = corCirculo;
                    const areia = 120 * progresso;
                    ctx.beginPath();
                    ctx.moveTo(-38, 60); ctx.lineTo(38, 60); ctx.lineTo(0, 60 - areia); ctx.closePath(); ctx.fill();
                    ctx.restore();
                    break;
                
                  case "fogo":
                    ctx.save();
                    const flame = ctx.createLinearGradient(-50, -100 + 20 * Math.sin(progresso * 10), 50, 100);
                    flame.addColorStop(0, "orange");
                    flame.addColorStop(1, "red");
                    ctx.fillStyle = flame;
                    ctx.beginPath();
                    ctx.moveTo(0, -60);
                    ctx.bezierCurveTo(40, -80, 40, 20, 0, 60);
                    ctx.bezierCurveTo(-40, 20, -40, -80, 0, -60);
                    ctx.fill();
                    ctx.restore();
                    break;
                
                  case "relampago":
                    ctx.save();
                    const shakeX = 3 * Math.sin(progresso * 20);
                    ctx.translate(shakeX, 0);
                    ctx.fillStyle = corCirculo;
                    ctx.beginPath();
                    ctx.moveTo(0, -50);
                    ctx.lineTo(20, 0);
                    ctx.lineTo(-10, 0);
                    ctx.lineTo(10, 50);
                    ctx.lineTo(-20, 0);
                    ctx.lineTo(0, -50);
                    ctx.fill();
                    ctx.restore();
                    break;
                
                  case "caveira":
                    ctx.save();
                    ctx.fillStyle = corCirculo;
                    ctx.beginPath(); ctx.arc(0, -10, 40, 0, 2 * Math.PI); ctx.fill();
                    ctx.beginPath(); ctx.arc(-15, -20, 8, 0, 2 * Math.PI);
                    ctx.fillStyle = progresso % 0.2 < 0.1 ? "black" : "white"; ctx.fill();
                    ctx.beginPath(); ctx.arc(15, -20, 8, 0, 2 * Math.PI); ctx.fill();
                    ctx.restore();
                    break;
                
                  case "folha":
                    ctx.save();
                    ctx.rotate(0.05 * Math.sin(progresso * 10 * Math.PI));
                    ctx.fillStyle = corCirculo;
                    ctx.beginPath();
                    ctx.moveTo(0, -60);
                    ctx.quadraticCurveTo(60, 0, 0, 60);
                    ctx.quadraticCurveTo(-60, 0, 0, -60);
                    ctx.fill();
                    ctx.restore();
                    break;
                
                  case "olho":
                    ctx.save();
                    ctx.fillStyle = "white";
                    ctx.beginPath(); ctx.ellipse(0, 0, 60, 30, 0, 0, 2 * Math.PI); ctx.fill();
                    ctx.fillStyle = corCirculo;
                    const raioOlho = 15 + 10 * Math.sin(progresso * Math.PI);
                    ctx.beginPath(); ctx.arc(0, 0, raioOlho, 0, 2 * Math.PI); ctx.fill();
                    ctx.restore();
                    break;
                
                  case "bomba":
                    ctx.save();
                    ctx.fillStyle = corCirculo;
                    ctx.beginPath(); ctx.arc(0, 0, 40, 0, 2 * Math.PI); ctx.fill();
                    ctx.strokeStyle = "gray";
                    const tremor = 2 * Math.sin(progresso * 30);
                    ctx.beginPath(); ctx.moveTo(tremor, -40); ctx.lineTo(tremor, -60); ctx.stroke();
                    ctx.restore();
                    break;
                
                  case "barra-horizontal":
                    ctx.save();
                    ctx.fillStyle = corCirculo;
                    ctx.fillRect(-100, -15, 200 * progresso, 30);
                    ctx.strokeStyle = "gray";
                    ctx.strokeRect(-100, -15, 200, 30);
                    if (progresso > 0.2) {
                      ctx.fillStyle = "rgba(255,255,255,0.1)";
                      ctx.fillRect(-100 + 200 * progresso - 10, -15, 10, 30);
                    }
                    ctx.restore();
                    break;
                
                  case "barra-vertical":
                    ctx.save();
                    ctx.globalAlpha = progresso;
                    ctx.fillStyle = corCirculo;
                    ctx.fillRect(-15, 60 - 120 * progresso, 30, 120 * progresso);
                    ctx.globalAlpha = 1;
                    ctx.strokeStyle = "gray";
                    ctx.strokeRect(-15, -60, 30, 120);
                    ctx.restore();
                    break;
                
                  case "digital":
                    ctx.save();
                    if (tempoRestante < 1) {
                      ctx.fillStyle = "red";
                      ctx.font = "bold 80px monospace";
                    } else {
                      ctx.fillStyle = corTexto;
                      ctx.font = "bold 60px monospace";
                    }
                    ctx.textAlign = "center";
                    ctx.fillText(`${Math.ceil(tempoRestante)}`, 0, 20);
                    ctx.restore();
                    break;
                
                  case "pizza":
                    ctx.save();
                    ctx.rotate(progresso * 2 * Math.PI);
                    ctx.beginPath();
                    ctx.moveTo(0, 0);
                    ctx.arc(0, 0, 60, anguloInicio, anguloFim);
                    ctx.closePath();
                    ctx.fillStyle = corCirculo;
                    ctx.fill();
                    ctx.restore();
                    break;
                
                  case "cadeado":
                    ctx.save();
                    const scaleLock = tempoRestante < 1 ? 1.2 : 1;
                    ctx.scale(scaleLock, scaleLock);
                    ctx.fillStyle = corCirculo;
                    ctx.fillRect(-25, 0, 50, 50);
                    ctx.beginPath();
                    ctx.arc(0, 0, 25, Math.PI, 0);
                    ctx.fill();
                    ctx.restore();
                    break;
                
                  case "cerebro":
                    ctx.save();
                    const pulsar = 1 + 0.05 * Math.sin(progresso * 8 * Math.PI);
                    ctx.scale(pulsar, pulsar);
                    ctx.fillStyle = corCirculo;
                    ctx.beginPath(); ctx.ellipse(0, 0, 60, 40, 0, 0, 2 * Math.PI); ctx.fill();
                    ctx.restore();
                    break;
                
                  case "gelo":
                    ctx.save();
                    ctx.fillStyle = corCirculo;
                    const melt = 30 * progresso;
                    ctx.beginPath();
                    ctx.moveTo(-30, -30); ctx.lineTo(30, -30 + melt);
                    ctx.lineTo(30, 30); ctx.lineTo(-30, 30); ctx.closePath();
                    ctx.fill();
                    ctx.strokeStyle = "white";
                    ctx.beginPath(); ctx.moveTo(-30, -30); ctx.lineTo(30, 30);
                    ctx.moveTo(30, -30 + melt); ctx.lineTo(-30, 30); ctx.stroke();
                    ctx.restore();
                    break;
                
                  case "microfone":
                    ctx.save();
                    ctx.translate(2 * Math.sin(progresso * 10), 0);
                    ctx.fillStyle = corCirculo;
                    ctx.beginPath(); ctx.arc(0, -20, 20, 0, 2 * Math.PI); ctx.fill();
                    ctx.fillRect(-5, 0, 10, 30);
                    ctx.beginPath(); ctx.moveTo(-15, 30); ctx.lineTo(15, 30); ctx.stroke();
                    ctx.restore();
                    break;
                
                	case "toxic-slime":
                  ctx.save();
                  ctx.fillStyle = "#7CFC00"; 
                  for (let i = 0; i < 5; i++) {
                    const x = Math.sin(progresso * 20 + i) * 10 + i * 12 - 30;
                    const height = 10 + Math.abs(Math.sin(progresso * 8 + i)) * 20;
                    ctx.beginPath();
                    ctx.ellipse(x, 0, 6, height, 0, 0, 2 * Math.PI);
                    ctx.fill();
                  }
                  ctx.restore();
                  break;
                
                case "cyber-grid":
                  ctx.save();
                  ctx.strokeStyle = "#00FFFF";
                  ctx.lineWidth = 1;
                  for (let i = -50; i <= 50; i += 10) {
                    ctx.beginPath();
                    ctx.moveTo(i, -50);
                    ctx.lineTo(i, 50);
                    ctx.stroke();
                
                    ctx.beginPath();
                    ctx.moveTo(-50, i);
                    ctx.lineTo(50, i);
                    ctx.stroke();
                  }
                  ctx.restore();
                  break;
                
                case "pink-sakura":
                  ctx.save();
                  const petals = 6;
                  for (let i = 0; i < petals; i++) {
                    const angle = (i * 2 * Math.PI) / petals + progresso * 2;
                    const x = Math.cos(angle) * 30;
                    const y = Math.sin(angle) * 30;
                    ctx.beginPath();
                    ctx.fillStyle = "#FFC0CB";
                    ctx.arc(x, y, 8, 0, 2 * Math.PI);
                    ctx.fill();
                  }
                  ctx.restore();
                  break;
                
                case "space-night":
                  ctx.save();
                  for (let i = 0; i < 25; i++) {
                    const x = Math.sin(i + progresso * 50) * 40 + (Math.random() * 4 - 2);
                    const y = Math.cos(i * 1.3 + progresso * 40) * 40 + (Math.random() * 4 - 2);
                    ctx.fillStyle = "white";
                    ctx.beginPath();
                    ctx.arc(x, y, Math.random() * 1.5 + 0.5, 0, 2 * Math.PI);
                    ctx.fill();
                  }
                  ctx.restore();
                  break;
                
                case "matrix-code":
                  ctx.save();
                  ctx.font = "16px monospace";
                  ctx.fillStyle = "#00FF00";
                  for (let i = -2; i <= 2; i++) {
                    const x = i * 12;
                    const y = ((progresso * 300 + i * 30) % 100) - 50;
                    const char = String.fromCharCode(0x30A0 + Math.floor(Math.random() * 96));
                    ctx.fillText(char, x, y);
                  }
                  ctx.restore();
                  break;
                
                case "bubblegum-pop":
                  ctx.save();
                  for (let i = 0; i < 5; i++) {
                    const radius = 6 + Math.sin(progresso * 10 + i) * 3;
                    const x = Math.cos(i + progresso * 3) * 25;
                    const y = Math.sin(i + progresso * 3) * 25;
                    ctx.beginPath();
                    ctx.fillStyle = "#FF69B4";
                    ctx.globalAlpha = 0.6;
                    ctx.arc(x, y, radius, 0, 2 * Math.PI);
                    ctx.fill();
                  }
                  ctx.globalAlpha = 1.0;
                  ctx.restore();
                  break;
                
                }
                
                  ctx.restore();
                
                  ctx.font = `bold ${tamanhoTexto}px Arial`;
                  ctx.fillStyle = corTexto;
                  ctx.textAlign = "center";
                  ctx.textBaseline = "middle";
                  ctx.fillText(`${Math.ceil(tempoRestante)}`, centro, centro);
                
                if (!modoPremiumToggle.checked) {  
                    ctx.save();
                    ctx.font = 'bold 26px Arial';
                    ctx.fillStyle = 'rgba(255, 0, 0, 0.15)';  
                    ctx.textAlign = 'center';
                    ctx.textBaseline = 'middle';
                    ctx.fillText('COUNTDOWNGIF.COM', centro, 40); 
                    ctx.fillText('COUNTDOWNGIF.COM', centro, centro); 
                    ctx.fillText('COUNTDOWNGIF.COM', centro, LOGICAL_SIZE - 40); 
                    ctx.restore();
                }
                
                }
                
                function iniciarContagem() {
                
                const tempoInicial = parseInt(document.getElementById('initialTime').value);
                
                const modoPremiumAtivo = document.getElementById('modoPremiumToggle').checked;
                
					if (!modoPremiumAtivo && tempoInicial > 30) {
					  exibirMensagemErro("🚫 Apenas usuários Premium podem gerar GIFs com mais de 30 segundos.");
					  cancelProcess(); // utilize a função correta do seu projeto aqui
					  return; 
					}

                
                  document.getElementById("generateButton").style.display = "none";
                  document.getElementById("resetButton").style.display = "none";
                
                  const cancelBtn = document.getElementById("cancelButton");
                  cancelBtn.style.display = "inline-block";
                  cancelBtn.style.animation = "pulseGlowRed 1.5s ease-in-out infinite";
                
                	const botaoPreview = document.getElementById("mostrarPreview");
                	botaoPreview.style.pointerEvents = "none";
                	botaoPreview.style.opacity = "0.4";
                
                  mostrarAviso("Iniciando geração do GIF...");
                  desabilitarControles();
                  frames = [];
                  cancelRequested = false;
                  document.getElementById("cancelButton").disabled = false;
                  document.getElementById("cancelButton").style.display = "inline-block";
                
                  const tempoTotalSegundos = tempoTotal;
                  status.textContent = "Contando...";
                  gifDownload.innerHTML = "<p>Contando...</p>";
                
                  let startTime = null;
                  let lastFrameTime = 0;
                
                  function animationLoop(timestamp) {
                  if (cancelRequested) {
                    status.textContent = "Processo cancelado!";
                    gifDownload.innerHTML = "<p>O processo foi cancelado.</p>";
                    habilitarControles();
                    return;
                  }
                
                  if (!startTime) startTime = timestamp;
                  const elapsed = (timestamp - startTime) / 1000;
                  let tempoRestante = tempoTotalSegundos - elapsed;
                  if (tempoRestante < 0) tempoRestante = 0;
                  const progresso = elapsed / tempoTotalSegundos;
                
                  desenharFrame(progresso, Math.floor(tempoRestante));
                
                  if (timestamp - lastFrameTime >= 50) {
                    frames.push(canvas.toDataURL("image/png"));
                    lastFrameTime = timestamp;
                  }
                
                  gifDownload.innerHTML = `<p>Tempo estimado para finalização: ${Math.floor(tempoRestante)} segundos</p>`;
                
                  if (elapsed < tempoTotalSegundos) {
                  requestAnimationFrame(animationLoop);
                } else {
                  status.textContent = "Enviando para o servidor...";
                  gifDownload.innerHTML = "<p>Enviando para o servidor...</p>";
                
                  desenharFrame(1, 0); 
                  frames.push(canvas.toDataURL("image/png"));
                
                  const progressBar = document.getElementById("progressBarInner");
                  const progressText = document.getElementById("progressPercent");
                
                  let progress = 0;
                  const interval = setInterval(() => {
                    progress += 4;
                    progressBar.style.width = `${progress}%`;
                    progressText.textContent = `${progress}%`;
                
                    if (progress >= 80) {
                      clearInterval(interval);
                      enviarParaServidor(frames);
                    }
                  }, 100);
                }
                }
                
                function enviarParaServidor(frames) {
                  fetch('/api/gerar-gif', {
                    method: 'POST',
                    headers: {
                      'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ frames })
                  })
                  .then(response => response.json())
                  .then(data => {
                
                    const gifUrl = data.url;
                
                    const progressBar = document.getElementById("progressBarInner");
                    const progressText = document.getElementById("progressPercent");
                
                    let progress = 80; 
                
                    const interval = setInterval(() => {
                      progress += 2; 
                      progressBar.style.width = `${progress}%`;
                      progressText.textContent = `${Math.floor(progress)}%`;
                
                      if (progress >= 100) {
                        clearInterval(interval);
                
                        habilitarControles();
                
                      gifDownload.innerHTML = `
                  <p>GIF gerado com sucesso!</p>
                  <a href="${gifUrl}" download="cronometro.gif" class="btn-download pulsante">Baixar GIF</a>
                `;
                
                botaoPreview.style.pointerEvents = "auto";
                botaoPreview.style.opacity = "1";
                
                document.querySelector(".btn-download").addEventListener("click", () => {
                  document.getElementById("cancelButton").style.display = "none";
                
                  gifDownload.innerHTML = "<p>Aguardando...</p>";
                  document.getElementById("progressBarInner").style.width = "0%";
                  document.getElementById("progressBarInner").style.background = "linear-gradient(90deg, #28a745, #45c46a)";
                  document.getElementById("progressPercent").textContent = "0%";
                });
                
                        document.querySelector(".pulsante").style.animation = "pulse 1s infinite"; 
                      }
                    }, 100); 
                
                  })
                  .catch(error => {
                    console.error('Erro ao enviar os frames para o servidor:', error);
                    alert('Erro ao gerar o GIF. Tente novamente.');
                  });
                }
                
                const style = document.createElement('style');
                style.innerHTML = `
                  @keyframes pulse {
                    0% { transform: scale(1); }
                    50% { transform: scale(1.1); }
                    100% { transform: scale(1); }
                  }
                  .pulsante {
                    background-color: #007bff;
                    color: white;
                    font-weight: bold;
                    padding: 14px 20px;
                    border-radius: 5px;
                    text-align: center;
                    cursor: pointer;
                    transition: background-color 0.3s ease;
                  }
                  .pulsante:hover {
                    background-color: #0056b3;
                  }
                `;
                document.head.appendChild(style);
                
                  requestAnimationFrame(animationLoop);
                }
                
                let cancelRequested = false; 
                
                function cancelProcess() {
                
                  document.getElementById("generateButton").style.display = "inline-block";
                  document.getElementById("resetButton").style.display = "inline-block";
                  const cancelBtn = document.getElementById("cancelButton");
                  cancelBtn.style.animation = "none";
                  cancelBtn.style.display = "none";
                
                const botaoPreview = document.getElementById("mostrarPreview");
                botaoPreview.style.pointerEvents = "auto";
                botaoPreview.style.opacity = "1";
                
                  mostrarAviso("Cancelando processo...");
                  cancelRequested = true;
                  status.textContent = "Processo cancelado!";
                  document.getElementById("cancelButton").style.display = "none";
                  gifDownload.innerHTML = "<p>O processo foi cancelado.</p>";
                
                  habilitarControles();
                
                  const progressBar = document.getElementById("progressBarInner");
                  const progressText = document.getElementById("progressPercent");
                
                  progressBar.style.background = "linear-gradient(90deg, #dc3545, #ff6b6b)";
                  progressBar.style.width = "0%";
                  progressText.textContent = "0%";
                
                  let progress = 0;
                  const cancelAnimation = setInterval(() => {
                    progress += 5;
                    progressBar.style.width = `${progress}%`;
                    progressText.textContent = `${progress}%`;
                
                    if (progress >= 100) {
                      clearInterval(cancelAnimation);
                      setTimeout(() => {
                        progressBar.style.width = "0%";
                        progressText.textContent = "0%";
                        progressBar.style.background = "linear-gradient(90deg, #28a745, #45c46a)";
                      }, 400);
                    }
                  }, 40);
                }
                
                function resetarPadroes() {
                  mostrarAviso("Redefinindo para os padrões...");
                  document.getElementById("initialTime").value = 30;
                  tempoTotal = 30;
                
                  document.getElementById("circuloTransparente").checked = false;
                  document.getElementById("corCirculo").value = "#1E3A8A"; 
                  document.getElementById("hexCirculo").value = "#1E3A8A";
                  document.getElementById("grossuraCirculo").value = 30;
                  document.getElementById("displayGrossuraCirculo").textContent = 30;
                  document.getElementById("circuloContornoAtivo").checked = true;
                  document.getElementById("grupoCirculoContorno").style.display = "block";
                  document.getElementById("corCirculoContorno").value = "#F59E0B"; 
                  document.getElementById("hexCirculoContorno").value = "#F59E0B";
                  document.getElementById("grossuraCirculoContorno").value = 2;
                  document.getElementById("displayGrossuraCirculoContorno").textContent = 2;
                  document.getElementById("tipoCirculoContorno").value = "solid";
                
                  document.getElementById("bordaTransparente").checked = false;
                  document.getElementById("corBorda").value = "#111827"; 
                  document.getElementById("hexBorda").value = "#111827";
                  document.getElementById("grossuraBorda").value = 36;
                  document.getElementById("displayGrossuraBorda").textContent = 36;
                  document.getElementById("bordaContornoAtivo").checked = true;
                  document.getElementById("grupoBordaContorno").style.display = "block";
                  document.getElementById("corBordaContorno").value = "#E5E7EB"; 
                  document.getElementById("hexBordaContorno").value = "#E5E7EB";
                  document.getElementById("grossuraBordaContorno").value = 2;
                  document.getElementById("displayGrossuraBordaContorno").textContent = 2;
                  document.getElementById("tipoBordaContorno").value = "dashed";
                
                  document.getElementById("corTexto").value = "#0F172A"; 
                  document.getElementById("hexTexto").value = "#0F172A";
                  document.getElementById("tamanhoTexto").value = 88;
                  document.getElementById("displayTamanhoTexto").textContent = 88;
                  document.getElementById("textoContornoAtivo").checked = true;
                  document.getElementById("grupoTextoContorno").style.display = "block";
                  document.getElementById("corTextoContorno").value = "#FACC15"; 
                  document.getElementById("hexTextoContorno").value = "#FACC15";
                  document.getElementById("grossuraTextoContorno").value = 2;
                  document.getElementById("displayGrossuraTextoContorno").textContent = 2;
                  document.getElementById("tipoTextoContorno").value = "solid";
                
                  document.getElementById("fundoTransparente").checked = true;
                  document.getElementById("corFundo").value = "#FFFFFF";
                  document.getElementById("hexFundo").value = "transparent";
                  document.getElementById("corFundo").disabled = true;
                  document.getElementById("hexFundo").disabled = true;
                  document.getElementById("fundoContornoAtivo").checked = false;
                  document.getElementById("grupoFundoContorno").style.display = "none";
                  document.getElementById("corFundoContorno").value = "#F3F4F6";
                  document.getElementById("hexFundoContorno").value = "#F3F4F6";
                  document.getElementById("grossuraFundoContorno").value = 2;
                  document.getElementById("displayGrossuraFundoContorno").textContent = 2;
                  document.getElementById("tipoFundoContorno").value = "solid";
                
                  document.getElementById("sombraTransparente").checked = false;
                  document.getElementById("corSombra").value = "#9CA3AF"; 
                  document.getElementById("hexSombra").value = "#9CA3AF";
                  document.getElementById("corSombra").disabled = false;
                  document.getElementById("hexSombra").disabled = false;
                  document.getElementById("grupoSombra").style.display = "block";
                  document.getElementById("sombra").value = 15;
                  document.getElementById("sombraX").value = 4;
                  document.getElementById("sombraY").value = 4;
                  sombraAnterior = "#9CA3AF";
                
                  document.getElementById("tipoTraco").value = "solid";
                
                  const progressBar = document.getElementById("progressBarInner");
                  const progressText = document.getElementById("progressPercent");
                  progressBar.style.width = '0%';
                  progressText.textContent = '0%';
                
                  desenharFrame(0, tempoTotal);
                  gifDownload.innerHTML = "<p>Aguardando...</p>";
                  progressBar.style.width = "0%";
                  progressBar.style.background = "linear-gradient(90deg, #1E3A8A, #F59E0B)";
                  progressText.textContent = "0%";
                }
            </script>

            <script>
                let intervaloPreview = null;
                let emPreview = false;
                
                document.getElementById("mostrarPreview").addEventListener("click", (e) => {
                  e.preventDefault();
                
                  const link = document.getElementById("mostrarPreview");
                  const aviso = document.getElementById("avisoPreview");
                
                  if (!emPreview) {
                
                    const tempoPreview = parseInt(document.getElementById("initialTime").value) || 30;
                    let tempoRestante = tempoPreview;
                
                    mostrarAviso("Teste iniciando...");
                
                	link.innerHTML = `<br><span style="color:red; font-weight:bold;">Não terá lag</span>, isso é só uma demonstração <br><span style="color:red; font-weight:bold;">⛔ Clique aqui para parar o teste ⛔</span>`;
                
                    emPreview = true;
                
                    desenharFrame(0, tempoRestante);
                
                    intervaloPreview = setInterval(() => {
                      if (tempoRestante <= 0) {
                        clearInterval(intervaloPreview);
                        emPreview = false;
                        link.innerHTML = "<br>🔁 CLIQUE AQUI para mostrar somente o timer funcionando";
                        return;
                      }
                      desenharFrame(1 - tempoRestante / tempoPreview, tempoRestante);
                      tempoRestante--;
                    }, 1000);
                
                    setTimeout(() => {
                      aviso.classList.remove("show");
                      aviso.classList.add("hide");
                      setTimeout(() => {
                        aviso.style.display = "none";
                      }, 2000);
                    }, 2000);
                
                  } else {
                
                    clearInterval(intervaloPreview);
                    const valorOriginal = parseInt(document.getElementById("initialTime").value) || 30;
                    tempoTotal = valorOriginal;
                
                    desenharFrame(0, valorOriginal);
                    link.innerHTML = "<br>🔁 CLIQUE AQUI para mostrar somente o timer funcionando";
                    emPreview = false;
                  }
                });
            </script>

            <script>
                const botaoPreview = document.getElementById("mostrarPreview");
                
                  mostrarAviso("Iniciando contagem...");
                  desabilitarControles();
                  cancelRequested = false;
                  status.textContent = "Contando...";
                  gifDownload.innerHTML = "<p>Contando...</p>";
                  document.getElementById("cancelButton").style.display = "inline-block";
                  document.getElementById("cancelButton").disabled = false;
                
                  const tempoTotalSegundos = tempoTotal;
                  let startTime = null;
                
                  function animationLoop(timestamp) {
                    if (cancelRequested) {
                      status.textContent = "Processo cancelado!";
                      gifDownload.innerHTML = "<p>O processo foi cancelado.</p>";
                      habilitarControles();
                      return;
                    }
                
                    if (!startTime) startTime = timestamp;
                    const elapsed = (timestamp - startTime) / 1000;
                    let tempoRestante = tempoTotalSegundos - elapsed;
                    if (tempoRestante < 0) tempoRestante = 0;
                    const progresso = elapsed / tempoTotalSegundos;
                
                    desenharFrame(progresso, Math.floor(tempoRestante));
                
                    if (elapsed < tempoTotalSegundos) {
                      requestAnimationFrame(animationLoop);
                    } else {
                      desenharFrame(1, 0);
                      status.textContent = "Contagem finalizada.";
                      gifDownload.innerHTML = "<p>Contagem finalizada.</p>";
                      botaoPreview.style.pointerEvents = "auto";
                      botaoPreview.style.opacity = "1";
                      habilitarControles();
                      document.getElementById("cancelButton").style.display = "none";
                    }
                  }
                
                  requestAnimationFrame(animationLoop);
                }
            </script>

            <script>
                function mostrarAviso(texto) {
                
                  if (bloquearAvisoInicial) {
                    bloquearAvisoInicial = false; 
                    return;
                  }
                
                  const aviso = document.getElementById("avisoPreview");
                  aviso.innerHTML = `${texto}<div class="spinner"></div>`;
                  aviso.classList.remove("hide");
                  aviso.classList.add("show");
                  aviso.style.display = "block";
                
                  setTimeout(() => {
                    aviso.classList.remove("show");
                    aviso.classList.add("hide");
                    setTimeout(() => {
                      aviso.style.display = "none";
                    }, 2000);
                  }, 2000);
                }
            </script>

            <script>
                document.getElementById("tipoCronometro").addEventListener("change", () => {
                  let tempoPreview = 3;
                  let tempoRestante = tempoPreview;
                  let emPreviewAuto = true;
                
                  desenharFrame(0, tempoRestante);
                
                  const intervaloAuto = setInterval(() => {
                    if (tempoRestante <= 0 || !emPreviewAuto) {
                      clearInterval(intervaloAuto);
                      desenharFrame(0, parseInt(document.getElementById("initialTime").value) || 30);
                      return;
                    }
                
                    const progresso = 1 - tempoRestante / tempoPreview;
                    desenharFrame(progresso, tempoRestante);
                    tempoRestante--;
                  }, 1000);
                });
            </script>

            <script>
                function carregarPreset(preset) {
                  const modelos = {
                  "aurora-neon": {
                    corCirculo: "#B10DC9",
                    grossuraCirculo: 28,
                    circuloContornoAtivo: true,
                    corCirculoContorno: "#FFDC00",
                    grossuraCirculoContorno: 3,
                    tipoCirculoContorno: "dashed",
                
                    corBorda: "#85144b",
                    grossuraBorda: 34,
                    bordaContornoAtivo: true,
                    corBordaContorno: "#F012BE",
                    grossuraBordaContorno: 2,
                    tipoBordaContorno: "dotted",
                
                    corTexto: "#ffffff",
                    tamanhoTexto: 80,
                    textoContornoAtivo: true,
                    corTextoContorno: "#01FF70",
                    grossuraTextoContorno: 2,
                    tipoTextoContorno: "solid",
                
                    corFundo: "#000000",
                    fundoTransparente: false,
                    fundoContornoAtivo: false,
                    corFundoContorno: "#39CCCC",
                    grossuraFundoContorno: 1,
                    tipoFundoContorno: "solid",
                
                    corSombra: "#FF851B",
                    sombraTransparente: false,
                    sombra: 10,
                    sombraX: 4,
                    sombraY: 4,
                
                    tipoTraco: "dashed",
                    tipoCronometro: "padrao",
                    tamanhoObjetoCentral: 100
                  },
                
                  "black-ceo": {
                    corCirculo: "#1E1E1E",
                    grossuraCirculo: 28,
                    circuloContornoAtivo: true,
                    corCirculoContorno: "#555",
                    grossuraCirculoContorno: 2,
                    tipoCirculoContorno: "solid",
                
                    corBorda: "#000000",
                    grossuraBorda: 36,
                    bordaContornoAtivo: true,
                    corBordaContorno: "#888888",
                    grossuraBordaContorno: 2,
                    tipoBordaContorno: "dashed",
                
                    corTexto: "#FFFFFF",
                    tamanhoTexto: 88,
                    textoContornoAtivo: true,
                    corTextoContorno: "#FACC15",
                    grossuraTextoContorno: 2,
                    tipoTextoContorno: "solid",
                
                    corFundo: "#000000",
                    fundoTransparente: false,
                    fundoContornoAtivo: false,
                    corFundoContorno: "#222222",
                    grossuraFundoContorno: 2,
                    tipoFundoContorno: "solid",
                
                    corSombra: "#333333",
                    sombraTransparente: false,
                    sombra: 20,
                    sombraX: 4,
                    sombraY: 4,
                
                    tipoTraco: "solid",
                    tipoCronometro: "padrao",
                    tamanhoObjetoCentral: 100
                  },
                
                  "classic-gold": {
                    corCirculo: "#FFD700",
                    grossuraCirculo: 26,
                    circuloContornoAtivo: true,
                    corCirculoContorno: "#B8860B",
                    grossuraCirculoContorno: 2,
                    tipoCirculoContorno: "solid",
                
                    corBorda: "#8B7500",
                    grossuraBorda: 30,
                    bordaContornoAtivo: true,
                    corBordaContorno: "#FFFAF0",
                    grossuraBordaContorno: 1,
                    tipoBordaContorno: "dotted",
                
                    corTexto: "#4B0082",
                    tamanhoTexto: 80,
                    textoContornoAtivo: true,
                    corTextoContorno: "#FFD700",
                    grossuraTextoContorno: 2,
                    tipoTextoContorno: "solid",
                
                    corFundo: "#FFF8DC",
                    fundoTransparente: false,
                    fundoContornoAtivo: false,
                    corFundoContorno: "#DAA520",
                    grossuraFundoContorno: 2,
                    tipoFundoContorno: "solid",
                
                    corSombra: "#A0522D",
                    sombraTransparente: false,
                    sombra: 12,
                    sombraX: 3,
                    sombraY: 3,
                
                    tipoTraco: "solid",
                    tipoCronometro: "padrao",
                    tamanhoObjetoCentral: 100
                  },
                
                  "dark-neon": {
                    corCirculo: "#00FFFF",
                    grossuraCirculo: 24,
                    circuloContornoAtivo: true,
                    corCirculoContorno: "#00CED1",
                    grossuraCirculoContorno: 2,
                    tipoCirculoContorno: "dotted",
                
                    corBorda: "#2F4F4F",
                    grossuraBorda: 28,
                    bordaContornoAtivo: true,
                    corBordaContorno: "#20B2AA",
                    grossuraBordaContorno: 2,
                    tipoBordaContorno: "solid",
                
                    corTexto: "#FFFFFF",
                    tamanhoTexto: 75,
                    textoContornoAtivo: true,
                    corTextoContorno: "#00FFFF",
                    grossuraTextoContorno: 2,
                    tipoTextoContorno: "solid",
                
                    corFundo: "#000000",
                    fundoTransparente: false,
                    fundoContornoAtivo: false,
                    corFundoContorno: "#000000",
                    grossuraFundoContorno: 0,
                    tipoFundoContorno: "solid",
                
                    corSombra: "#00CED1",
                    sombraTransparente: false,
                    sombra: 15,
                    sombraX: 2,
                    sombraY: 2,
                
                    tipoTraco: "solid",
                    tipoCronometro: "padrao",
                    tamanhoObjetoCentral: 100
                  },
                
                  "electric-vibes": {
                    corCirculo: "#FF00FF",
                    grossuraCirculo: 26,
                    circuloContornoAtivo: true,
                    corCirculoContorno: "#FFFF00",
                    grossuraCirculoContorno: 2,
                    tipoCirculoContorno: "solid",
                
                    corBorda: "#000000",
                    grossuraBorda: 30,
                    bordaContornoAtivo: true,
                    corBordaContorno: "#FF69B4",
                    grossuraBordaContorno: 2,
                    tipoBordaContorno: "dotted",
                
                    corTexto: "#FFFFFF",
                    tamanhoTexto: 84,
                    textoContornoAtivo: true,
                    corTextoContorno: "#FFFF00",
                    grossuraTextoContorno: 2,
                    tipoTextoContorno: "solid",
                
                    corFundo: "#2F2F2F",
                    fundoTransparente: false,
                    fundoContornoAtivo: false,
                    corFundoContorno: "#000000",
                    grossuraFundoContorno: 0,
                    tipoFundoContorno: "solid",
                
                    corSombra: "#FF00FF",
                    sombraTransparente: false,
                    sombra: 10,
                    sombraX: 5,
                    sombraY: 5,
                
                    tipoTraco: "dashed",
                    tipoCronometro: "padrao",
                    tamanhoObjetoCentral: 100
                  },
                
                  "futuristic-ice": {
                    corCirculo: "#00BFFF",
                    grossuraCirculo: 24,
                    circuloContornoAtivo: true,
                    corCirculoContorno: "#E0FFFF",
                    grossuraCirculoContorno: 2,
                    tipoCirculoContorno: "dashed",
                
                    corBorda: "#87CEEB",
                    grossuraBorda: 28,
                    bordaContornoAtivo: true,
                    corBordaContorno: "#ADD8E6",
                    grossuraBordaContorno: 2,
                    tipoBordaContorno: "solid",
                
                    corTexto: "#000080",
                    tamanhoTexto: 82,
                    textoContornoAtivo: true,
                    corTextoContorno: "#E0FFFF",
                    grossuraTextoContorno: 2,
                    tipoTextoContorno: "solid",
                
                    corFundo: "#F0F8FF",
                    fundoTransparente: false,
                    fundoContornoAtivo: false,
                    corFundoContorno: "#F0FFFF",
                    grossuraFundoContorno: 1,
                    tipoFundoContorno: "solid",
                
                    corSombra: "#4682B4",
                    sombraTransparente: false,
                    sombra: 12,
                    sombraX: 2,
                    sombraY: 2,
                
                    tipoTraco: "solid",
                    tipoCronometro: "padrao",
                    tamanhoObjetoCentral: 100
                  },
                
                  "glitch-alert": {
                    corCirculo: "#FF0000",
                    grossuraCirculo: 30,
                    circuloContornoAtivo: true,
                    corCirculoContorno: "#0000FF",
                    grossuraCirculoContorno: 3,
                    tipoCirculoContorno: "dotted",
                
                    corBorda: "#00FF00",
                    grossuraBorda: 34,
                    bordaContornoAtivo: true,
                    corBordaContorno: "#FF00FF",
                    grossuraBordaContorno: 3,
                    tipoBordaContorno: "dashed",
                
                    corTexto: "#FFFFFF",
                    tamanhoTexto: 90,
                    textoContornoAtivo: true,
                    corTextoContorno: "#FF0000",
                    grossuraTextoContorno: 2,
                    tipoTextoContorno: "solid",
                
                    corFundo: "#000000",
                    fundoTransparente: false,
                    fundoContornoAtivo: false,
                    corFundoContorno: "#111",
                    grossuraFundoContorno: 0,
                    tipoFundoContorno: "solid",
                
                    corSombra: "#00FFFF",
                    sombraTransparente: false,
                    sombra: 20,
                    sombraX: 5,
                    sombraY: 5,
                
                    tipoTraco: "dotted",
                    tipoCronometro: "padrao",
                    tamanhoObjetoCentral: 100
                  },
                
                  "minimal-clean": {
                    corCirculo: "#CCCCCC",
                    grossuraCirculo: 18,
                    circuloContornoAtivo: false,
                    corCirculoContorno: "#AAAAAA",
                    grossuraCirculoContorno: 1,
                    tipoCirculoContorno: "solid",
                
                    corBorda: "#EEEEEE",
                    grossuraBorda: 20,
                    bordaContornoAtivo: false,
                    corBordaContorno: "#DDDDDD",
                    grossuraBordaContorno: 1,
                    tipoBordaContorno: "solid",
                
                    corTexto: "#333333",
                    tamanhoTexto: 70,
                    textoContornoAtivo: false,
                    corTextoContorno: "#000000",
                    grossuraTextoContorno: 1,
                    tipoTextoContorno: "solid",
                
                    corFundo: "#FFFFFF",
                    fundoTransparente: false,
                    fundoContornoAtivo: false,
                    corFundoContorno: "#FFFFFF",
                    grossuraFundoContorno: 0,
                    tipoFundoContorno: "solid",
                
                    corSombra: "#AAAAAA",
                    sombraTransparente: true,
                    sombra: 0,
                    sombraX: 0,
                    sombraY: 0,
                
                    tipoTraco: "solid",
                    tipoCronometro: "padrao",
                    tamanhoObjetoCentral: 100
                  },
                
                  "sunset-wave": {
                    corCirculo: "#FF4500",
                    grossuraCirculo: 28,
                    circuloContornoAtivo: true,
                    corCirculoContorno: "#FFD700",
                    grossuraCirculoContorno: 2,
                    tipoCirculoContorno: "solid",
                
                    corBorda: "#8B0000",
                    grossuraBorda: 30,
                    bordaContornoAtivo: true,
                    corBordaContorno: "#FFA500",
                    grossuraBordaContorno: 2,
                    tipoBordaContorno: "solid",
                
                    corTexto: "#FFFFFF",
                    tamanhoTexto: 80,
                    textoContornoAtivo: true,
                    corTextoContorno: "#FF6347",
                    grossuraTextoContorno: 2,
                    tipoTextoContorno: "solid",
                
                    corFundo: "#FFF5E1",
                    fundoTransparente: false,
                    fundoContornoAtivo: false,
                    corFundoContorno: "#FFDAB9",
                    grossuraFundoContorno: 1,
                    tipoFundoContorno: "solid",
                
                    corSombra: "#FF8C00",
                    sombraTransparente: false,
                    sombra: 10,
                    sombraX: 3,
                    sombraY: 3,
                
                    tipoTraco: "solid",
                    tipoCronometro: "padrao",
                    tamanhoObjetoCentral: 100
                  },
                
                  "zen-wood": {
                    corCirculo: "#8B4513",
                    grossuraCirculo: 22,
                    circuloContornoAtivo: true,
                    corCirculoContorno: "#A0522D",
                    grossuraCirculoContorno: 2,
                    tipoCirculoContorno: "solid",
                
                    corBorda: "#DEB887",
                    grossuraBorda: 26,
                    bordaContornoAtivo: true,
                    corBordaContorno: "#F5DEB3",
                    grossuraBordaContorno: 2,
                    tipoBordaContorno: "solid",
                
                    corTexto: "#3E2723",
                    tamanhoTexto: 85,
                    textoContornoAtivo: true,
                    corTextoContorno: "#FFFFFF",
                    grossuraTextoContorno: 2,
                    tipoTextoContorno: "solid",
                
                    corFundo: "#FFF8DC",
                    fundoTransparente: false,
                    fundoContornoAtivo: false,
                    corFundoContorno: "#F5DEB3",
                    grossuraFundoContorno: 1,
                    tipoFundoContorno: "solid",
                
                    corSombra: "#A0522D",
                    sombraTransparente: false,
                    sombra: 10,
                    sombraX: 3,
                    sombraY: 3,
                
                    tipoTraco: "solid",
                    tipoCronometro: "padrao",
                    tamanhoObjetoCentral: 100
                  },
                
                  "red-urgency": {
                    corCirculo: "#FF0000",
                    grossuraCirculo: 34,
                    circuloContornoAtivo: true,
                    corCirculoContorno: "#FFC0CB",
                    grossuraCirculoContorno: 3,
                    tipoCirculoContorno: "dashed",
                
                    corBorda: "#8B0000",
                    grossuraBorda: 36,
                    bordaContornoAtivo: true,
                    corBordaContorno: "#FFA07A",
                    grossuraBordaContorno: 3,
                    tipoBordaContorno: "solid",
                
                    corTexto: "#FFFFFF",
                    tamanhoTexto: 90,
                    textoContornoAtivo: true,
                    corTextoContorno: "#FF4500",
                    grossuraTextoContorno: 2,
                    tipoTextoContorno: "solid",
                
                    corFundo: "#FFF0F0",
                    fundoTransparente: false,
                    fundoContornoAtivo: false,
                    corFundoContorno: "#FFDADA",
                    grossuraFundoContorno: 1,
                    tipoFundoContorno: "solid",
                
                    corSombra: "#B22222",
                    sombraTransparente: false,
                    sombra: 16,
                    sombraX: 4,
                    sombraY: 4,
                
                    tipoTraco: "solid",
                    tipoCronometro: "padrao",
                    tamanhoObjetoCentral: 100
                  },
                
                	  "ocean-bliss": {
                    corCirculo: "#1E90FF",
                    grossuraCirculo: 28,
                    circuloContornoAtivo: true,
                    corCirculoContorno: "#87CEFA",
                    grossuraCirculoContorno: 2,
                    tipoCirculoContorno: "solid",
                
                    corBorda: "#104E8B",
                    grossuraBorda: 30,
                    bordaContornoAtivo: true,
                    corBordaContorno: "#B0E0E6",
                    grossuraBordaContorno: 2,
                    tipoBordaContorno: "dotted",
                
                    corTexto: "#FFFFFF",
                    tamanhoTexto: 85,
                    textoContornoAtivo: true,
                    corTextoContorno: "#1E90FF",
                    grossuraTextoContorno: 2,
                    tipoTextoContorno: "solid",
                
                    corFundo: "#F0F8FF",
                    fundoTransparente: false,
                    fundoContornoAtivo: false,
                    corFundoContorno: "#E6F7FF",
                    grossuraFundoContorno: 1,
                    tipoFundoContorno: "solid",
                
                    corSombra: "#4682B4",
                    sombraTransparente: false,
                    sombra: 12,
                    sombraX: 3,
                    sombraY: 3,
                
                    tipoTraco: "solid",
                    tipoCronometro: "padrao",
                    tamanhoObjetoCentral: 100
                  },
                
                  "green-energy": {
                    corCirculo: "#32CD32",
                    grossuraCirculo: 28,
                    circuloContornoAtivo: true,
                    corCirculoContorno: "#ADFF2F",
                    grossuraCirculoContorno: 2,
                    tipoCirculoContorno: "dotted",
                
                    corBorda: "#006400",
                    grossuraBorda: 30,
                    bordaContornoAtivo: true,
                    corBordaContorno: "#7CFC00",
                    grossuraBordaContorno: 2,
                    tipoBordaContorno: "solid",
                
                    corTexto: "#F8FFF0",
                    tamanhoTexto: 82,
                    textoContornoAtivo: true,
                    corTextoContorno: "#006400",
                    grossuraTextoContorno: 2,
                    tipoTextoContorno: "solid",
                
                    corFundo: "#F5FFF5",
                    fundoTransparente: false,
                    fundoContornoAtivo: false,
                    corFundoContorno: "#E6FFE6",
                    grossuraFundoContorno: 1,
                    tipoFundoContorno: "solid",
                
                    corSombra: "#90EE90",
                    sombraTransparente: false,
                    sombra: 10,
                    sombraX: 2,
                    sombraY: 2,
                
                    tipoTraco: "solid",
                    tipoCronometro: "folha",
                    tamanhoObjetoCentral: 100
                  },
                
                  "pink-pulse": {
                    corCirculo: "#FF69B4",
                    grossuraCirculo: 26,
                    circuloContornoAtivo: true,
                    corCirculoContorno: "#FFB6C1",
                    grossuraCirculoContorno: 2,
                    tipoCirculoContorno: "solid",
                
                    corBorda: "#C71585",
                    grossuraBorda: 32,
                    bordaContornoAtivo: true,
                    corBordaContorno: "#FF1493",
                    grossuraBordaContorno: 2,
                    tipoBordaContorno: "dotted",
                
                    corTexto: "#FFFFFF",
                    tamanhoTexto: 86,
                    textoContornoAtivo: true,
                    corTextoContorno: "#C71585",
                    grossuraTextoContorno: 2,
                    tipoTextoContorno: "solid",
                
                    corFundo: "#FFF0F5",
                    fundoTransparente: false,
                    fundoContornoAtivo: false,
                    corFundoContorno: "#FFDDEE",
                    grossuraFundoContorno: 1,
                    tipoFundoContorno: "solid",
                
                    corSombra: "#FF69B4",
                    sombraTransparente: false,
                    sombra: 10,
                    sombraX: 3,
                    sombraY: 3,
                
                    tipoTraco: "dashed",
                    tipoCronometro: "coracao",
                    tamanhoObjetoCentral: 100
                  },
                
                  "shadow-tech": {
                    corCirculo: "#555555",
                    grossuraCirculo: 24,
                    circuloContornoAtivo: true,
                    corCirculoContorno: "#AAAAAA",
                    grossuraCirculoContorno: 2,
                    tipoCirculoContorno: "solid",
                
                    corBorda: "#222222",
                    grossuraBorda: 28,
                    bordaContornoAtivo: true,
                    corBordaContorno: "#888888",
                    grossuraBordaContorno: 2,
                    tipoBordaContorno: "solid",
                
                    corTexto: "#E0E0E0",
                    tamanhoTexto: 78,
                    textoContornoAtivo: true,
                    corTextoContorno: "#333333",
                    grossuraTextoContorno: 2,
                    tipoTextoContorno: "solid",
                
                    corFundo: "#121212",
                    fundoTransparente: false,
                    fundoContornoAtivo: false,
                    corFundoContorno: "#1A1A1A",
                    grossuraFundoContorno: 1,
                    tipoFundoContorno: "solid",
                
                    corSombra: "#000000",
                    sombraTransparente: false,
                    sombra: 15,
                    sombraX: 4,
                    sombraY: 4,
                
                    tipoTraco: "solid",
                    tipoCronometro: "padrao",
                    tamanhoObjetoCentral: 100
                  },
                
                  "lemon-glow": {
                    corCirculo: "#E1FF00",
                    grossuraCirculo: 26,
                    circuloContornoAtivo: true,
                    corCirculoContorno: "#C5E86C",
                    grossuraCirculoContorno: 2,
                    tipoCirculoContorno: "solid",
                
                    corBorda: "#B2C248",
                    grossuraBorda: 30,
                    bordaContornoAtivo: true,
                    corBordaContorno: "#DAF7A6",
                    grossuraBordaContorno: 2,
                    tipoBordaContorno: "dotted",
                
                    corTexto: "#333333",
                    tamanhoTexto: 84,
                    textoContornoAtivo: true,
                    corTextoContorno: "#F5FFB2",
                    grossuraTextoContorno: 2,
                    tipoTextoContorno: "solid",
                
                    corFundo: "#F9FFEA",
                    fundoTransparente: false,
                    fundoContornoAtivo: false,
                    corFundoContorno: "#FFFFCC",
                    grossuraFundoContorno: 1,
                    tipoFundoContorno: "solid",
                
                    corSombra: "#E1FF00",
                    sombraTransparente: false,
                    sombra: 10,
                    sombraX: 2,
                    sombraY: 2,
                
                    tipoTraco: "solid",
                    tipoCronometro: "padrao",
                    tamanhoObjetoCentral: 100
                  },
                
                  "midnight-blue": {
                    corCirculo: "#191970",
                    grossuraCirculo: 28,
                    circuloContornoAtivo: true,
                    corCirculoContorno: "#4169E1",
                    grossuraCirculoContorno: 2,
                    tipoCirculoContorno: "dashed",
                
                    corBorda: "#000080",
                    grossuraBorda: 32,
                    bordaContornoAtivo: true,
                    corBordaContorno: "#6A5ACD",
                    grossuraBordaContorno: 2,
                    tipoBordaContorno: "solid",
                
                    corTexto: "#FFFFFF",
                    tamanhoTexto: 80,
                    textoContornoAtivo: true,
                    corTextoContorno: "#00BFFF",
                    grossuraTextoContorno: 2,
                    tipoTextoContorno: "solid",
                
                    corFundo: "#0D1B2A",
                    fundoTransparente: false,
                    fundoContornoAtivo: false,
                    corFundoContorno: "#1B263B",
                    grossuraFundoContorno: 1,
                    tipoFundoContorno: "solid",
                
                    corSombra: "#274690",
                    sombraTransparente: false,
                    sombra: 12,
                    sombraX: 3,
                    sombraY: 3,
                
                    tipoTraco: "solid",
                    tipoCronometro: "olho",
                    tamanhoObjetoCentral: 100
                  },
                
                  "lava-burst": {
                    corCirculo: "#FF4500",
                    grossuraCirculo: 30,
                    circuloContornoAtivo: true,
                    corCirculoContorno: "#FF6347",
                    grossuraCirculoContorno: 2,
                    tipoCirculoContorno: "dashed",
                
                    corBorda: "#8B0000",
                    grossuraBorda: 34,
                    bordaContornoAtivo: true,
                    corBordaContorno: "#FFA07A",
                    grossuraBordaContorno: 2,
                    tipoBordaContorno: "solid",
                
                    corTexto: "#FFFFF0",
                    tamanhoTexto: 88,
                    textoContornoAtivo: true,
                    corTextoContorno: "#FF4500",
                    grossuraTextoContorno: 2,
                    tipoTextoContorno: "solid",
                
                    corFundo: "#FFF5EE",
                    fundoTransparente: false,
                    fundoContornoAtivo: false,
                    corFundoContorno: "#FFDAB9",
                    grossuraFundoContorno: 1,
                    tipoFundoContorno: "solid",
                
                    corSombra: "#FF6347",
                    sombraTransparente: false,
                    sombra: 14,
                    sombraX: 4,
                    sombraY: 4,
                
                    tipoTraco: "solid",
                    tipoCronometro: "fogo",
                    tamanhoObjetoCentral: 100
                  },
                
                  "frosted-purple": {
                    corCirculo: "#9370DB",
                    grossuraCirculo: 26,
                    circuloContornoAtivo: true,
                    corCirculoContorno: "#D8BFD8",
                    grossuraCirculoContorno: 2,
                    tipoCirculoContorno: "solid",
                
                    corBorda: "#4B0082",
                    grossuraBorda: 30,
                    bordaContornoAtivo: true,
                    corBordaContorno: "#BA55D3",
                    grossuraBordaContorno: 2,
                    tipoBordaContorno: "dotted",
                
                    corTexto: "#FFFFFF",
                    tamanhoTexto: 84,
                    textoContornoAtivo: true,
                    corTextoContorno: "#E6E6FA",
                    grossuraTextoContorno: 2,
                    tipoTextoContorno: "solid",
                
                    corFundo: "#FAF0FF",
                    fundoTransparente: false,
                    fundoContornoAtivo: false,
                    corFundoContorno: "#EED5FF",
                    grossuraFundoContorno: 1,
                    tipoFundoContorno: "solid",
                
                    corSombra: "#B19CD9",
                    sombraTransparente: false,
                    sombra: 12,
                    sombraX: 3,
                    sombraY: 3,
                
                    tipoTraco: "solid",
                    tipoCronometro: "padrao",
                    tamanhoObjetoCentral: 100
                  },
                
                  "steel-glow": {
                    corCirculo: "#B0C4DE",
                    grossuraCirculo: 24,
                    circuloContornoAtivo: true,
                    corCirculoContorno: "#D3D3D3",
                    grossuraCirculoContorno: 2,
                    tipoCirculoContorno: "solid",
                
                    corBorda: "#708090",
                    grossuraBorda: 28,
                    bordaContornoAtivo: true,
                    corBordaContorno: "#C0C0C0",
                    grossuraBordaContorno: 2,
                    tipoBordaContorno: "solid",
                
                    corTexto: "#2F4F4F",
                    tamanhoTexto: 80,
                    textoContornoAtivo: true,
                    corTextoContorno: "#DCDCDC",
                    grossuraTextoContorno: 2,
                    tipoTextoContorno: "solid",
                
                    corFundo: "#F8F8FF",
                    fundoTransparente: false,
                    fundoContornoAtivo: false,
                    corFundoContorno: "#E6E6FA",
                    grossuraFundoContorno: 1,
                    tipoFundoContorno: "solid",
                
                    corSombra: "#A9A9A9",
                    sombraTransparente: false,
                    sombra: 10,
                    sombraX: 2,
                    sombraY: 2,
                
                    tipoTraco: "solid",
                    tipoCronometro: "padrao",
                    tamanhoObjetoCentral: 100
                  },
                
                  "deep-sea": {
                  corCirculo: "#00BFFF",
                  grossuraCirculo: 26,
                  corTexto: "#FFFFFF",
                  tamanhoTexto: 84,
                  corBorda: "#1E90FF",
                  grossuraBorda: 30,
                  corFundo: "#001F3F",
                  fundoTransparente: false,
                  corSombra: "#1E90FF",
                  sombraTransparente: false,
                  sombra: 10,
                  sombraX: 3,
                  sombraY: 3,
                  tipoTraco: "solid",
                  tipoCronometro: "padrao",
                  tamanhoObjetoCentral: 100
                },
                
                "toxic-slime": {
                  corCirculo: "#ADFF2F",
                  grossuraCirculo: 28,
                  corTexto: "#000000",
                  tamanhoTexto: 82,
                  corBorda: "#32CD32",
                  grossuraBorda: 30,
                  corFundo: "#E0FFE0",
                  fundoTransparente: false,
                  corSombra: "#7FFF00",
                  sombraTransparente: false,
                  sombra: 8,
                  sombraX: 2,
                  sombraY: 2,
                  tipoTraco: "dashed",
                  tipoCronometro: "padrao",
                  tamanhoObjetoCentral: 100
                },
                
                "cyber-grid": {
                  corCirculo: "#00FFFF",
                  grossuraCirculo: 28,
                  corTexto: "#39FF14",
                  tamanhoTexto: 82,
                  corBorda: "#0FF",
                  grossuraBorda: 30,
                  corFundo: "#000000",
                  fundoTransparente: false,
                  corSombra: "#00FFFF",
                  sombraTransparente: false,
                  sombra: 12,
                  sombraX: 4,
                  sombraY: 4,
                  tipoTraco: "dotted",
                  tipoCronometro: "padrao",
                  tamanhoObjetoCentral: 100
                },
                
                "forest-bliss": {
                  corCirculo: "#228B22",
                  grossuraCirculo: 26,
                  corTexto: "#FFFFFF",
                  tamanhoTexto: 80,
                  corBorda: "#006400",
                  grossuraBorda: 28,
                  corFundo: "#E6FFE6",
                  fundoTransparente: false,
                  corSombra: "#2E8B57",
                  sombraTransparente: false,
                  sombra: 8,
                  sombraX: 2,
                  sombraY: 2,
                  tipoTraco: "solid",
                  tipoCronometro: "folha",
                  tamanhoObjetoCentral: 100
                },
                
                "lava-pulse": {
                  corCirculo: "#FF4500",
                  grossuraCirculo: 30,
                  corTexto: "#FFF8DC",
                  tamanhoTexto: 86,
                  corBorda: "#8B0000",
                  grossuraBorda: 32,
                  corFundo: "#FFF0E0",
                  fundoTransparente: false,
                  corSombra: "#FF6347",
                  sombraTransparente: false,
                  sombra: 10,
                  sombraX: 3,
                  sombraY: 3,
                  tipoTraco: "solid",
                  tipoCronometro: "fogo",
                  tamanhoObjetoCentral: 100
                },
                
                "pink-sakura": {
                  corCirculo: "#FFB6C1",
                  grossuraCirculo: 28,
                  corTexto: "#C71585",
                  tamanhoTexto: 80,
                  corBorda: "#FFC0CB",
                  grossuraBorda: 30,
                  corFundo: "#FFF0F5",
                  fundoTransparente: false,
                  corSombra: "#FF69B4",
                  sombraTransparente: false,
                  sombra: 8,
                  sombraX: 2,
                  sombraY: 2,
                  tipoTraco: "dotted",
                  tipoCronometro: "padrao",
                  tamanhoObjetoCentral: 100
                },
                
                "space-night": {
                  corCirculo: "#483D8B",
                  grossuraCirculo: 28,
                  corTexto: "#FFFFFF",
                  tamanhoTexto: 84,
                  corBorda: "#191970",
                  grossuraBorda: 32,
                  corFundo: "#000000",
                  fundoTransparente: false,
                  corSombra: "#8A2BE2",
                  sombraTransparente: false,
                  sombra: 12,
                  sombraX: 3,
                  sombraY: 3,
                  tipoTraco: "solid",
                  tipoCronometro: "padrao",
                  tamanhoObjetoCentral: 100
                },
                
                "matrix-code": {
                  corCirculo: "#00FF00",
                  grossuraCirculo: 26,
                  corTexto: "#00FF00",
                  tamanhoTexto: 84,
                  corBorda: "#003300",
                  grossuraBorda: 28,
                  corFundo: "#000000",
                  fundoTransparente: false,
                  corSombra: "#00FF00",
                  sombraTransparente: false,
                  sombra: 10,
                  sombraX: 3,
                  sombraY: 3,
                  tipoTraco: "dotted",
                  tipoCronometro: "padrao",
                  tamanhoObjetoCentral: 100
                },
                
                "vintage-clock": {
                  corCirculo: "#F5DEB3",
                  grossuraCirculo: 26,
                  corTexto: "#3E2723",
                  tamanhoTexto: 80,
                  corBorda: "#DEB887",
                  grossuraBorda: 30,
                  corFundo: "#FAEBD7",
                  fundoTransparente: false,
                  corSombra: "#A0522D",
                  sombraTransparente: false,
                  sombra: 10,
                  sombraX: 3,
                  sombraY: 3,
                  tipoTraco: "solid",
                  tipoCronometro: "relogio-digital",
                  tamanhoObjetoCentral: 100
                },
                
                "bubblegum-pop": {
                  corCirculo: "#FF69B4",
                  grossuraCirculo: 28,
                  corTexto: "#FFFFFF",
                  tamanhoTexto: 84,
                  corBorda: "#FFB6C1",
                  grossuraBorda: 30,
                  corFundo: "#FFF0F5",
                  fundoTransparente: false,
                  corSombra: "#FFC0CB",
                  sombraTransparente: false,
                  sombra: 10,
                  sombraX: 3,
                  sombraY: 3,
                  tipoTraco: "dashed",
                  tipoCronometro: "padrao",
                  tamanhoObjetoCentral: 100
                }
                
                };
                ;
                
                  const modelo = modelos[preset];
                  if (!modelo) return;
                
                  const aplicarCor = (id, cor) => {
                    document.getElementById(`cor${id}`).value = cor;
                    document.getElementById(`hex${id}`).value = cor;
                  };
                
                  const aplicarRange = (id, valor) => {
                    document.getElementById(id).value = valor;
                    const display = document.getElementById("display" + id.charAt(0).toUpperCase() + id.slice(1));
                    if (display) display.textContent = valor;
                  };
                
                  const aplicarCheckbox = (id, ativado) => {
                    const checkbox = document.getElementById(id);
                    checkbox.checked = ativado;
                    checkbox.dispatchEvent(new Event('change')); 
                  };
                
                  aplicarCor("Circulo", modelo.corCirculo);
                  aplicarRange("grossuraCirculo", modelo.grossuraCirculo);
                  aplicarCheckbox("circuloContornoAtivo", modelo.circuloContornoAtivo);
                  aplicarCor("CirculoContorno", modelo.corCirculoContorno);
                  aplicarRange("grossuraCirculoContorno", modelo.grossuraCirculoContorno);
                  document.getElementById("tipoCirculoContorno").value = modelo.tipoCirculoContorno;
                
                  aplicarCor("Borda", modelo.corBorda);
                  aplicarRange("grossuraBorda", modelo.grossuraBorda);
                  aplicarCheckbox("bordaContornoAtivo", modelo.bordaContornoAtivo);
                  aplicarCor("BordaContorno", modelo.corBordaContorno);
                  aplicarRange("grossuraBordaContorno", modelo.grossuraBordaContorno);
                  document.getElementById("tipoBordaContorno").value = modelo.tipoBordaContorno;
                
                  aplicarCor("Texto", modelo.corTexto);
                  aplicarRange("tamanhoTexto", modelo.tamanhoTexto);
                  aplicarCheckbox("textoContornoAtivo", modelo.textoContornoAtivo);
                  aplicarCor("TextoContorno", modelo.corTextoContorno);
                  aplicarRange("grossuraTextoContorno", modelo.grossuraTextoContorno);
                  document.getElementById("tipoTextoContorno").value = modelo.tipoTextoContorno;
                
                  aplicarCor("Fundo", modelo.corFundo);
                  aplicarCheckbox("fundoTransparente", modelo.fundoTransparente);
                  aplicarCheckbox("fundoContornoAtivo", modelo.fundoContornoAtivo);
                  aplicarCor("FundoContorno", modelo.corFundoContorno);
                  aplicarRange("grossuraFundoContorno", modelo.grossuraFundoContorno);
                  document.getElementById("tipoFundoContorno").value = modelo.tipoFundoContorno;
                
                  aplicarCor("Sombra", modelo.corSombra);
                  aplicarCheckbox("sombraTransparente", modelo.sombraTransparente);
                  document.getElementById("sombra").value = modelo.sombra;
                  document.getElementById("sombraX").value = modelo.sombraX;
                  document.getElementById("sombraY").value = modelo.sombraY;
                
                  document.getElementById("tipoTraco").value = modelo.tipoTraco;
                  document.getElementById("tipoCronometro").value = modelo.tipoCronometro;
                  document.getElementById("tamanhoObjetoCentral").value = modelo.tamanhoObjetoCentral;
                  document.getElementById("displayTamanhoObjetoCentral").textContent = modelo.tamanhoObjetoCentral;
                
                  desenharFrame(0, tempoTotal);
                }
            </script>

            <script>
					// Função para aplicar modo claro/escuro e atualizar o status na tela
					function aplicarModo(ativarDark) {
					  const modoToggle = document.getElementById("modoToggle");
					  const modoStatus = document.getElementById("modoStatus");

					  if (ativarDark) {
						document.body.classList.add('dark-mode');
						modoStatus.textContent = '🌙 Dark Mode ativo!';
						modoToggle.checked = true;
					  } else {
						document.body.classList.remove('dark-mode');
						modoStatus.textContent = '☀️ Ativar dark mode!';
						modoToggle.checked = false;
					  }
					}

					// Função que verifica preferência salva no localStorage ou preferência do sistema
					function carregarPreferenciaDarkMode() {
					  const preferenciaSalva = localStorage.getItem("modoDark");

					  if (preferenciaSalva !== null) {
						// Já existe preferência salva, respeita ela
						aplicarModo(preferenciaSalva === "true");
					  } else {
						// Não tem preferência salva, verifica a preferência do sistema operacional/browser
						const prefereEscuro = window.matchMedia("(prefers-color-scheme: dark)").matches;
						aplicarModo(prefereEscuro);
					  }
					}

					// Evento ao alterar o botão de dark mode
					document.getElementById("modoToggle").addEventListener("change", (e) => {
					  const modoAtivo = e.target.checked;
					  aplicarModo(modoAtivo);
					  localStorage.setItem("modoDark", modoAtivo);
					});

					// Carrega a preferência correta ao iniciar a página
					window.addEventListener('DOMContentLoaded', carregarPreferenciaDarkMode);

            </script>

            <script>
                const modoPremiumToggle = document.getElementById('modoPremiumToggle');
                  const premiumTexto = document.getElementById('premiumTexto');
                  const canvas = document.getElementById('canvas'); 
                
                  function atualizarStatusPremium() {
                    premiumAtivo = modoPremiumToggle.checked;
                
                    if (premiumAtivo) {
                      premiumTexto.textContent = '👑 Você está no modo Premium! ';
                      canvas.classList.remove("marca-dagua");
                    } else {
                      premiumTexto.textContent = '🌟 Seja Premium para mais vantagens!➡️ ';
                      canvas.classList.add("marca-dagua");
                    }
                
                    desenharFrame(0, tempoTotal);
                  }
            </script>
			
			<script>
					document.getElementById("resetButton").addEventListener("click", () => {
					  document.getElementById("confirmResetBox").style.display = "flex";
					});

					// Botão confirmar resetar padrões
					document.getElementById("confirmarReset").addEventListener("click", () => {
					  document.getElementById("confirmResetBox").style.display = "none";
					  resetarPadroes();  // Executa a função original que reseta tudo
					});

					// Botão cancelar ação
					document.getElementById("cancelarReset").addEventListener("click", () => {
					  document.getElementById("confirmResetBox").style.display = "none";
					  mostrarAviso("Ação cancelada!"); // Opcional, mensagem que informa o usuário
					});
			</script>
			
			
			
			

</body>

</html>